(function(e){function t(t){for(var s,n,o=t[0],l=t[1],c=t[2],u=0,m=[];u<o.length;u++)n=o[u],i[n]&&m.push(i[n][0]),i[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);d&&d(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(r.splice(t--,1),e=n(n.s=a[0]))}return e}var s={},i={app:0},r=[];function n(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=s,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"033e":function(e,t,a){},"0efd":function(e,t,a){"use strict";var s=a("1f31"),i=a.n(s);i.a},"0f8a":function(e,t,a){},"1f31":function(e,t,a){},"26aa":function(e,t,a){"use strict";var s=a("5fc4"),i=a.n(s);i.a},"3f12":function(e,t,a){},"46ec":function(e,t,a){},"497f":function(e,t,a){"use strict";var s=a("a73e"),i=a.n(s);i.a},"4da4":function(e,t,a){"use strict";var s=a("6f81"),i=a.n(s);i.a},5436:function(e,t,a){"use strict";var s=a("716f"),i=a.n(s);i.a},"56c8":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},r=[],n={},o=n,l=a("2877"),c=Object(l["a"])(o,i,r,!1,null,null,null),d=c.exports,u=a("bc3a"),m=a.n(u),p=a("1a9a"),v={install:function(e){var t=(new p["a"]).withUrl("".concat(e.prototype.$http.defaults.baseURL,"/incidencia-hub")).configureLogging(p["b"].Information).build(),a=new e;e.prototype.$incidenciaHub=a,t.on("IncidenciaAdded",function(e){a.$emit("incidencia-added",{incidencia:e})})}},f=(a("741f"),a("ce5b")),g=a.n(f),h=a("fb9a"),b=a.n(h),x=(a("04f2"),a("8c4f")),I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper",class:{"nav-open":e.$sidebar.showSidebar}},[a("notifications"),a("side-bar",{class:{"only-icons":e.showIcons},attrs:{showIcons:e.showIcons}},[a("mobile-menu",{attrs:{slot:"content"},slot:"content"}),a("sidebar-link",{attrs:{showIcons:e.showIcons}})],1),a("div",{class:[e.showIcons?"toggle-min":"toggle-max"],attrs:{id:"togglebutton"},on:{click:function(t){e.showIcons=!e.showIcons}}},[a("md-speed-dial",{class:[e.showIcons?"ml-1":"ml-6"]},[a("md-speed-dial-target",{staticClass:"padding-zero"},[a("i",{staticClass:"fas fa-bars"})])],1)],1),a("div",{class:[e.showIcons?"main-panel main-panel-larger":"main-panel"]},[a("top-navbar"),a("div",{staticStyle:{"margin-top":"100px","margin-left":"10px","margin-right":"10px"}},[a("dashboard-content")],1)],1)],1)},C=[],_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-toolbar",{staticStyle:{"background-color":"#7ac043 !important"}},[a("div",{staticClass:"md-toolbar-row"},[a("div",{staticClass:"md-toolbar-section-start"},[a("h3",{staticClass:"md-title"},[e._v(e._s(e.$route.name))])]),a("div",{staticClass:"md-toolbar-section-end fixed-breadcrumb"},[a("md-button",{staticClass:"md-just-icon md-simple md-toolbar-toggle md-button-transparent",class:{toggled:e.$sidebar.showSidebar},on:{click:e.toggleSidebar}},[a("i",{staticClass:"fas fa-bars"})]),a("div",{staticClass:"md-collapse"},[a("v-list",{staticStyle:{background:"transparent",color:"white"},attrs:{"two-line":""}},[a("div",[a("md-list",[a("md-list-item",[a("div",{staticStyle:{color:"white !important"}},[e._v("Bienvenido "+e._s(e.user.cNombre))])]),a("md-list-item",{staticStyle:{background:"transparent",color:"white"},attrs:{href:"#/administracion/usuario"}},[a("i",{staticClass:"material-icons",staticStyle:{background:"transparent",color:"white"}},[e._v("person")]),a("p",{staticClass:"hidden-lg hidden-md"},[e._v("Perfil")])]),a("md-list-item",{staticClass:"dropdown",attrs:{href:"#/"}},[a("drop-down",[a("a",{staticClass:"dropdown-toggle",attrs:{slot:"title","data-toggle":"dropdown"},slot:"title"},[a("i",{staticClass:"material-icons",staticStyle:{background:"transparent",color:"white"}},[e._v("notifications")]),a("span",{staticClass:"notification"},[e._v("2")]),a("p",{staticClass:"hidden-lg hidden-md"},[e._v("Notificaciones")])]),a("ul",{staticClass:"dropdown-menu dropdown-menu-right"},[a("li",[a("a",{attrs:{href:"#"}},[e._v("Jhon Whitman respondio a tu comentario")])])])])],1),a("md-list-item",{on:{click:e.logout}},[a("i",{staticClass:"material-icons",staticStyle:{background:"transparent",color:"white"}},[e._v("exit_to_app")]),a("p",{staticClass:"hidden-lg hidden-md"},[e._v("Salir")])])],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("v-list-tile",[e._v("Empresa autorizada: "+e._s(e.user.cRazonSocial))])],1)])],1)],1)])])},y=[],S="access_token",O="refresh_token",w={getToken:function(){return localStorage.getItem(S)},saveToken:function(e){localStorage.setItem(S,e)},removeToken:function(){localStorage.removeItem(S)},getRefreshToken:function(){return localStorage.getItem(O)},saveRefreshToken:function(e){localStorage.setItem(O,e)},removeRefreshToken:function(){localStorage.removeItem(O)}},k={data:function(){return{selectedEmployee:null,user:null}},methods:{toggleSidebar:function(){this.$sidebar.displaySidebar(!this.$sidebar.showSidebar)},logout:function(){w.removeToken(),ha.push("/login")}},mounted:function(){var e=localStorage.getItem("user");this.user=JSON.parse(e),console.log(this.user)}},N=k,A=(a("ae26"),Object(l["a"])(N,_,y,!1,null,null,null)),E=A.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{staticClass:"footer"},[a("div",{staticClass:"container"},[e._m(0),a("div",{staticClass:"copyright text-center"},[e._v("\n      © "+e._s((new Date).getFullYear())+"\n      "),a("a",{attrs:{href:"https://www.creative-tim.com/?ref=mdf-vuejs",target:"_blank"}},[e._v("Creative Tim")]),e._v(", made with "),a("i",{staticClass:"fa fa-heart heart"}),e._v(" for a better web\n    ")])])])},U=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",[a("ul",[a("li",[a("a",{attrs:{href:"https://www.creative-tim.com"}},[e._v("Creative Tim")])]),a("li",[a("a",{attrs:{href:"https://creative-tim.com/presentation"}},[e._v("\n            About Us\n          ")])]),a("li",[a("a",{attrs:{href:"http://blog.creative-tim.com"}},[e._v("\n            Blog\n          ")])]),a("li",[a("a",{attrs:{href:"https://www.creative-tim.com/license"}},[e._v("\n            Licenses\n          ")])])])])}],D={},$=D,z=Object(l["a"])($,P,U,!1,null,null,null),R=z.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)},M=[],T={},q=T,F=(a("5436"),Object(l["a"])(q,j,M,!1,null,null,null)),L=F.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"nav nav-mobile-menu"},[a("li",[a("drop-down",[a("a",{staticClass:"dropdown-toggle",attrs:{slot:"title","data-toggle":"dropdown"},slot:"title"},[a("i",{staticClass:"material-icons"},[e._v("notifications")]),a("span",{staticClass:"notification"},[e._v("2")]),a("p",[e._v("Notifications")])]),a("ul",{staticClass:"dropdown-menu dropdown-menu-right"},[a("li",[a("a",{attrs:{href:"#"}},[e._v("Jhon Whitman respondio a tu comentario")])]),a("li",[a("a",{attrs:{href:"#"}},[e._v("La incidencia XYZ ha sido cerrada")])])])])],1)])},B=[],J={data:function(){return{search:null,selectedEmployee:null,employees:["Jim Halpert","Dwight Schrute","Michael Scott","Pam Beesly","Angela Martin","Kelly Kapoor","Ryan Howard","Kevin Malone"]}}},W=J,K=Object(l["a"])(W,H,B,!1,null,null,null),G=K.exports,Y={components:{TopNavbar:E,DashboardContent:L,ContentFooter:R,MobileMenu:G},data:function(){return{showIcons:!1}}},X=Y,Z=(a("67d3"),Object(l["a"])(X,I,C,!1,null,null,null)),Q=Z.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-100 md-xsmall-size-100 md-size-33"},[a("chart-card",{attrs:{"chart-data":e.emailsSubscriptionChart.data,"chart-options":e.emailsSubscriptionChart.options,"chart-responsive-options":e.emailsSubscriptionChart.responsiveOptions,"chart-type":"Bar","data-background-color":"red"}},[a("template",{slot:"content"},[a("h4",{staticClass:"title"},[e._v("Incidencias 2019")]),a("p",{staticClass:"category"},[e._v("Categorizadas mensualmente")])]),a("template",{slot:"footer"},[a("div",{staticClass:"stats"},[a("md-icon",[e._v("access_time")]),e._v("Actualizado hace 1 hora\n          ")],1)])],2)],1),a("div",{staticClass:"md-layout-item md-medium-size-50 md-xsmall-size-100 md-size-25"},[a("stats-card",{attrs:{"data-background-color":"green"}},[a("template",{slot:"header"},[a("md-icon",[e._v("store")])],1),a("template",{slot:"content"},[a("p",{staticClass:"category"},[e._v("Incidencias atendidas")]),a("h3",{staticClass:"title"},[e._v("2/3")])]),a("template",{slot:"footer"},[a("div",{staticClass:"stats"},[a("md-icon",[e._v("date_range")]),e._v("Últimas 24 horas\n          ")],1)])],2)],1),a("div",{staticClass:"md-layout-item md-medium-size-50 md-xsmall-size-100 md-size-25"},[a("stats-card",{attrs:{"data-background-color":"orange"}},[a("template",{slot:"header"},[a("md-icon",[e._v("content_copy")])],1),a("template",{slot:"content"},[a("p",{staticClass:"category"},[e._v("Incidencias pendientes")]),a("h3",{staticClass:"title"},[e._v("1/3")])]),a("template",{slot:"footer"},[a("div",{staticClass:"stats"},[a("md-icon",[e._v("date_range")]),e._v("Últimas 24 horas\n          ")],1)])],2)],1)])])},ee=[],te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-card",[a("md-card-header",{staticClass:"card-chart",attrs:{"data-background-color":e.dataBackgroundColor}},[a("div",{staticClass:"ct-chart",attrs:{id:e.chartId}})]),a("md-card-content",[e._t("content")],2),a("md-card-actions",{attrs:{"md-alignment":"left"}},[e._t("footer")],2)],1)},ae=[],se={name:"chart-card",props:{footerText:{type:String,default:""},headerTitle:{type:String,default:"Chart title"},chartType:{type:String,default:"Line"},chartOptions:{type:Object,default:function(){return{}}},chartResponsiveOptions:{type:Array,default:function(){return[]}},chartData:{type:Object,default:function(){return{labels:[],series:[]}}},dataBackgroundColor:{type:String,default:""}},data:function(){return{chartId:"no-id"}},methods:{initChart:function(){var e="#".concat(this.chartId);this.$Chartist[this.chartType](e,this.chartData,this.chartOptions)},updateChartId:function(){var e=(new Date).getTime().toString(),t=this.getRandomInt(0,e);this.chartId="div_".concat(t)},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},mounted:function(){this.updateChartId(),this.$nextTick(this.initChart)}},ie=se,re=Object(l["a"])(ie,te,ae,!1,null,null,null),ne=re.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-card",{staticClass:"md-card-nav-tabs"},[a("md-card-content",[e._t("content")],2)],1)},le=[],ce={name:"nav-tabs-card"},de=ce,ue=Object(l["a"])(de,oe,le,!1,null,null,null),me=ue.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-card",{staticClass:"md-card-stats"},[a("md-card-header",{attrs:{"data-background-color":e.dataBackgroundColor}},[e._t("header")],2),a("md-card-content",[e._t("content")],2),a("md-card-actions",{attrs:{"md-alignment":"left"}},[e._t("footer")],2)],1)},ve=[],fe={name:"stats-card",props:{dataBackgroundColor:{type:String,default:""}}},ge=fe,he=Object(l["a"])(ge,pe,ve,!1,null,null,null),be=he.exports,xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-card",{staticClass:"md-card-login",class:{"md-card-hidden":e.cardHidden}},[a("md-card-header",{staticClass:"md-card-header-green"},[e._t("title")],2),a("md-card-content",[e._t("description"),e._t("inputs")],2),a("md-card-actions",[e._t("footer")],2)],1)},Ie=[],Ce={name:"LoginCard",props:{headerColor:{type:String,default:""}},data:function(){return{cardHidden:!0}},beforeMount:function(){setTimeout(this.showCard,400)},methods:{showCard:function(){this.cardHidden=!1}}},_e=Ce,ye=Object(l["a"])(_e,xe,Ie,!1,null,null,null),Se=ye.exports,Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("md-table",{on:{"md-selected":e.onSelect},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{attrs:{"md-selectable":"multiple","md-auto-select":""}},[a("md-table-cell",[e._v(e._s(s.name))]),a("md-table-cell",[a("md-button",{staticClass:"md-just-icon md-simple md-primary"},[a("md-icon",[e._v("edit")]),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Edit")])],1),a("md-button",{staticClass:"md-just-icon md-simple md-danger"},[a("md-icon",[e._v("close")]),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Close")])],1)],1)],1)}}]),model:{value:e.users,callback:function(t){e.users=t},expression:"users"}})],1)},we=[],ke={name:"nav-tabs-table",data:function(){return{selected:[],users:[{name:'Sign contract for "What are conference organizers afraid of?"'},{name:"Lines From Great Russian Literature? Or E-mails From My Boss?"},{name:"Flooded: One year later, assessing what was lost and what was found when a ravaging rain swept through metro Detroit"}]}},methods:{onSelect:function(e){this.selected=e}}},Ne=ke,Ae=Object(l["a"])(Ne,Oe,we,!1,null,null,null),Ee=Ae.exports,Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("md-table",{attrs:{"table-header-color":e.tableHeaderColor},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"ID"}},[e._v(e._s(s.id))]),a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(s.name))]),a("md-table-cell",{attrs:{"md-label":"Salary"}},[e._v(e._s(s.salary))]),a("md-table-cell",{attrs:{"md-label":"Country"}},[e._v(e._s(s.country))]),a("md-table-cell",{attrs:{"md-label":"City"}},[e._v(e._s(s.city))])],1)}}]),model:{value:e.users,callback:function(t){e.users=t},expression:"users"}})],1)},Ue=[],De={name:"ordered-table",props:{tableHeaderColor:{type:String,default:""}},data:function(){return{selected:[],users:[{id:1,name:"Dakota Rice",salary:"$36,738",country:"Niger",city:"Oud-Turnhout"},{id:2,name:"Minerva Hooper",salary:"$23,738",country:"Curaçao",city:"Sinaai-Waas"},{id:3,name:"Sage Rodriguez",salary:"$56,142",country:"Netherlands",city:"Overland Park"},{id:4,name:"Philip Chaney",salary:"$38,735",country:"Korea, South",city:"Gloucester"}]}}},$e=De,ze=Object(l["a"])($e,Pe,Ue,!1,null,null,null),Re=ze.exports,je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("md-table",{attrs:{"table-header-color":e.tableHeaderColor},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(s.name))]),a("md-table-cell",{attrs:{"md-label":"Country"}},[e._v(e._s(s.country))]),a("md-table-cell",{attrs:{"md-label":"City"}},[e._v(e._s(s.city))]),a("md-table-cell",{attrs:{"md-label":"Salary"}},[e._v(e._s(s.salary))])],1)}}]),model:{value:e.users,callback:function(t){e.users=t},expression:"users"}})],1)},Me=[],Te={name:"simple-table",props:{tableHeaderColor:{type:String,default:""}},data:function(){return{selected:[],users:[{name:"Dakota Rice",salary:"$36,738",country:"Niger",city:"Oud-Turnhout"},{name:"Minerva Hooper",salary:"$23,738",country:"Curaçao",city:"Sinaai-Waas"},{name:"Sage Rodriguez",salary:"$56,142",country:"Netherlands",city:"Overland Park"},{name:"Philip Chaney",salary:"$38,735",country:"Korea, South",city:"Gloucester"},{name:"Doris Greene",salary:"$63,542",country:"Malawi",city:"Feldkirchen in Kārnten"},{name:"Mason Porter",salary:"$78,615",country:"Chile",city:"Gloucester"}]}}},qe=Te,Fe=Object(l["a"])(qe,je,Me,!1,null,null,null),Le=(Fe.exports,{components:{StatsCard:be,ChartCard:ne,NavTabsCard:me,NavTabsTable:Ee,OrderedTable:Re},data:function(){return{dailySalesChart:{data:{labels:["M","T","W","T","F","S","S"],series:[[12,17,7,17,23,18,38]]},options:{lineSmooth:this.$Chartist.Interpolation.cardinal({tension:0}),low:0,high:50,chartPadding:{top:0,right:0,bottom:0,left:0}}},dataCompletedTasksChart:{data:{labels:["12am","3pm","6pm","9pm","12pm","3am","6am","9am"],series:[[230,750,450,300,280,240,200,190]]},options:{lineSmooth:this.$Chartist.Interpolation.cardinal({tension:0}),low:0,high:1e3,chartPadding:{top:0,right:0,bottom:0,left:0}}},emailsSubscriptionChart:{data:{labels:["Ja","Fe","Ma","Ap","Mai","Ju","Jul","Au","Se","Oc","No","De"],series:[[542,443,320,780,553,453,326,434,568,610,756,895]]},options:{axisX:{showGrid:!1},low:0,high:1e3,chartPadding:{top:0,right:5,bottom:0,left:0}},responsiveOptions:[["screen and (max-width: 640px)",{seriesBarDistance:5,axisX:{labelInterpolationFnc:function(e){return e[0]}}}]]}}}}),He=Le,Be=Object(l["a"])(He,V,ee,!1,null,null,null),Je=Be.exports,We=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-100 md-size-100"},[a("edit-profile-form",{attrs:{"data-background-color":"green"}})],1)])])},Ke=[],Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-card",{staticClass:"md-card-profile"},[a("div",{staticClass:"md-card-avatar"},[a("img",{staticClass:"img",attrs:{src:e.cardUserImage}})]),a("md-card-content",[a("h6",{staticClass:"category text-gray"},[e._v("CEO / Co-Founder")]),a("h4",{staticClass:"card-title"},[e._v("Alec Thompson")]),a("p",{staticClass:"card-description"},[e._v("\n      Don't be scared of the truth because we need to restart the human\n      foundation in truth And I love you like Kanye loves Kanye I love Rick\n      Owens’ bed design but the back is...\n    ")]),a("md-button",{staticClass:"md-round md-success"},[e._v("Follow")])],1)],1)},Ye=[],Xe={name:"user-card",props:{cardUserImage:{type:String,default:a("a180")}},data:function(){return{}}},Ze=Xe,Qe=Object(l["a"])(Ze,Ge,Ye,!1,null,null,null),Ve=Qe.exports,et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",[a("md-card",[a("md-card-header",{attrs:{"data-background-color":e.dataBackgroundColor}},[a("h4",{staticClass:"title"},[e._v("Registrar usuario")]),a("p",{staticClass:"category"},[e._v("Complete los datos para el registro de usuario")])]),a("md-card-content",[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-small-size-100 md-size-40"},[a("md-field",[a("label",[e._v("Nombres")]),a("md-input",{attrs:{type:"text"},model:{value:e.nombres,callback:function(t){e.nombres=t},expression:"nombres"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-30"},[a("md-field",[a("label",[e._v("Apellido paterno")]),a("md-input",{attrs:{type:"text"},model:{value:e.apellidoPaterno,callback:function(t){e.apellidoPaterno=t},expression:"apellidoPaterno"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-30"},[a("md-field",[a("label",[e._v("Apellido materno")]),a("md-input",{attrs:{type:"text"},model:{value:e.apellidoMaterno,callback:function(t){e.apellidoMaterno=t},expression:"apellidoMaterno"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-100"},[a("md-field",[a("label",[e._v("Email")]),a("md-input",{attrs:{type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-100"},[a("md-field",[a("label",[e._v("DNI")]),a("md-input",{attrs:{type:"text"},model:{value:e.dni,callback:function(t){e.dni=t},expression:"dni"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-100"},[a("md-field",[a("label",[e._v("Perfil")]),a("md-input",{attrs:{type:"text"},model:{value:e.perfil,callback:function(t){e.perfil=t},expression:"perfil"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-100"},[a("md-field",[a("label",[e._v("Empresa")]),a("md-input",{attrs:{type:"text"},model:{value:e.empresa,callback:function(t){e.empresa=t},expression:"empresa"}})],1)],1),a("div",{staticClass:"md-layout-item md-size-100 text-right"},[a("md-button",{staticClass:"md-raised md-success"},[e._v("Registrar")]),a("md-button",{staticClass:"md-raised md-danger"},[e._v("Cancelar")])],1)])])],1)],1)},tt=[],at={name:"edit-profile-form",props:{dataBackgroundColor:{type:String,default:""}},data:function(){return{nombres:"",apellidoPaterno:"",apellidoMaterno:"",email:"",dni:"",perfil:""}}},st=at,it=Object(l["a"])(st,et,tt,!1,null,null,null),rt=it.exports,nt=(a("bf40"),{components:{EditProfileForm:rt,UserCard:Ve}}),ot=nt,lt=Object(l["a"])(ot,We,Ke,!1,null,null,null),ct=lt.exports,dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-100 md-size-100"},[a("v-dialog",{attrs:{"max-width":"290"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Eliminar")]),a("v-card-text",[e._v("¿Está seguro de eliminar el registro?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1"},on:{click:function(t){e.dialogDelete=!1}}},[e._v("No")]),a("v-btn",{attrs:{color:"green darken-1"},on:{click:e.confirmDelete}},[e._v("Sí")])],1)],1)],1),e.isLoading?a("md-card",[a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v("\n              Por favor, espere...\n              "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1):e._e(),a("v-dialog",{attrs:{"max-width":"500px",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{staticClass:"inputNumber",attrs:{rules:e.rucRules,type:"number",label:"Ruc",counter:11,required:""},model:{value:e.editedItem.cRuc,callback:function(t){e.$set(e.editedItem,"cRuc",t)},expression:"editedItem.cRuc"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{counter:300,rules:e.razonSocialRules,label:"Razón social",required:""},model:{value:e.editedItem.cRazonSocial,callback:function(t){e.$set(e.editedItem,"cRazonSocial",t)},expression:"editedItem.cRazonSocial"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-combobox",{attrs:{"item-text":"cNomDescPlan","item-value":"nIdPlanPago",items:e.planesPagos,label:"Plan de pago","return-object":""},model:{value:e.planPago,callback:function(t){e.planPago=t},expression:"planPago"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Página web"},model:{value:e.editedItem.cPaginaWeb,callback:function(t){e.$set(e.editedItem,"cPaginaWeb",t)},expression:"editedItem.cPaginaWeb"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("div",{staticClass:"title font-weight-light"},[e._v("Datos contacto")])]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{staticClass:"inputNumber",attrs:{label:"DNI",type:"number",counter:8,rules:e.dniRules,disabled:e.editedIndex>-1,required:""},model:{value:e.editedItem.contacto.cDNI,callback:function(t){e.$set(e.editedItem.contacto,"cDNI",t)},expression:"editedItem.contacto.cDNI"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Nombre",rules:e.campoRequerido,disabled:e.editedIndex>-1,required:""},model:{value:e.editedItem.contacto.cNombre,callback:function(t){e.$set(e.editedItem.contacto,"cNombre",t)},expression:"editedItem.contacto.cNombre"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Ape. Paterno",rules:e.campoRequerido,disabled:e.editedIndex>-1,required:""},model:{value:e.editedItem.contacto.cApePaterno,callback:function(t){e.$set(e.editedItem.contacto,"cApePaterno",t)},expression:"editedItem.contacto.cApePaterno"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Ape. Materno",rules:e.campoRequerido,disabled:e.editedIndex>-1,required:""},model:{value:e.editedItem.contacto.cApeMaterno,callback:function(t){e.$set(e.editedItem.contacto,"cApeMaterno",t)},expression:"editedItem.contacto.cApeMaterno"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Email",rules:e.emailRules,disabled:e.editedIndex>-1,required:""},model:{value:e.editedItem.contacto.cEmail,callback:function(t){e.$set(e.editedItem.contacto,"cEmail",t)},expression:"editedItem.contacto.cEmail"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Celular",rules:e.campoRequerido,disabled:e.editedIndex>-1,required:""},model:{value:e.editedItem.contacto.cCelular,callback:function(t){e.$set(e.editedItem.contacto,"cCelular",t)},expression:"editedItem.contacto.cCelular"}})],1)],1)],1)],1),e.errored?a("div",{staticClass:"v-messages theme--light error--text"},[a("div",{staticClass:"v-messages__wrapper"},[a("div",{staticClass:"v-messages__message"},[e._v(e._s(e.errorMessage))])])]):e._e()],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"background-color":"#3198ca !important",color:"white !important"},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"success",disabled:!e.valid},on:{click:e.save}},[e._v("Save")])],1)],1)],1),a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Empresas")]),a("v-divider",{staticClass:"mx-2",staticStyle:{"max-height":"0px !important"},attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"info"},on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[e._v("Nueva empresa")])],1),a("div",{staticStyle:{position:"static !important"}},[a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"search",label:"Buscar por RUC / Razón social","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e.empresas?a("v-data-table",{attrs:{headers:e.headers,items:e.empresas,search:e.search,filter:e.searchData,"custom-filter":e.filterData,"rows-per-page-items":e.rowsPerPageItems,"no-data-text":"''","rows-per-page-text":"Filas por página"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cRuc))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cRazonSocial))]),a("td",{staticClass:"text-xs-left",staticStyle:{width:"500px !important"}},[e._v(e._s(t.item.cNomDescPlan))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.contacto.cDNI))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.contacto.nombreCompleto))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.contacto.cEmail))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.contacto.cCelular))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cPaginaWeb))]),a("td",{staticClass:"justify-start layout"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.editItem(t.item)}}},[e._v("edit")]),a("v-icon",{attrs:{small:""},on:{click:function(a){return a.stopPropagation(),e.deleteItem(t.item)}}},[e._v("delete")])],1)]}},{key:"no-results",fn:function(){return[a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("No se encontraron resultados")])]},proxy:!0}],null,!1,1060696707)}):e._e()],1)],1)],1)])])},ut=[],mt={name:"TableSearch",data:function(){return{valid:!0,errored:!1,errorMessage:null,isLoading:!1,dialog:!1,dialogDelete:!1,search:"",rowsPerPageItems:[10,20,30,40],headers:[{text:"Ruc",value:"cRuc"},{text:"Razon social",value:"cRazonSocial"},{text:"Plan de Pago",value:"cNomDescPlan"},{text:"DNI Contacto",value:"contacto.cDNI"},{text:"Nombre Contacto",value:"contacto.nombreCompleto"},{text:"Email Contacto",value:"contacto.cEmail"},{text:"Celular Contacto",value:"contacto.cCelular"},{text:"Pagina web",value:"cPaginaWeb"},{text:"Acciones",value:"cRuc",sortable:!1}],empresas:[],planesPagos:[],editedIndex:-1,itemToDelete:null,planPago:{nIdPlanPago:-1,cNomDescPlan:""},editedItem:{nIdEmpresa:0,cRuc:"",cRazonSocial:"",cPaginaWeb:"",nIdPlanPago:-1,contacto:{nIdUsuario:0,cDNI:"",cNombre:"",cApePaterno:"",cApeMaterno:"",cEmail:"",cCelular:"",usuSesion:{UserId:1}}},defaultItem:{nIdEmpresa:0,cRuc:"",cRazonSocial:"",cPaginaWeb:"",nIdPlanPago:-1,contacto:{nIdUsuario:0,cDNI:"",cNombre:"",cApePaterno:"",cApeMaterno:"",cEmail:"",cCelular:"",usuSesion:{nIdUsuario:1}}},rucRules:[function(e){return!!e||"El campo es requerido"},function(e){return 11==e.length||"RUC debe tener 11 caracteres"},function(e){return/^\d*$/.test(e)||"RUC sólo puede contener números"}],dniRules:[function(e){return!!e||"El campo es requerido"},function(e){return 8==e.length||"DNI debe tener 8 caracteres"},function(e){return/^\d*$/.test(e)||"DNI sólo puede contener números"}],razonSocialRules:[function(e){return!!e||"El campo es requerido"},function(e){return e.length<=300||"Razón social no debe tener más de 300 caracteres"}],emailRules:[function(e){return!!e||"El campo es requerido"},function(e){return/.+@.+/.test(e)||"Email no es válido"}],campoRequerido:[function(e){return!!e||"El campo es requerido"}]}},computed:{formTitle:function(){return-1===this.editedIndex?"Nueva empresa":"Editar empresa"}},methods:{editItem:function(e){this.editedIndex=this.empresas.indexOf(e),this.editedItem=Object.assign({},e),this.planPago={nIdPlanPago:e.nIdPlanPago,cNomDescPlan:e.cNomDescPlan},this.dialog=!0},deleteItem:function(e){this.dialogDelete=!0,this.itemToDelete=e},confirmDelete:function(){var e=this,t=this.itemToDelete.nIdEmpresa,a=1;this.$http.delete("/api/empresa/".concat(t,"/").concat(a)).then(function(a){var s=e.empresas.findIndex(function(e){return e.nIdEmpresa==t});e.empresas.splice(s,1)}).catch(function(e){return console.log(e)}),this.dialogDelete=!1},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1,e.errored=!1,e.errorMessage=null,e.$refs.form.reset()},300)},save:function(){var e=this;this.$refs.form.validate()&&(this.dialog=!1,this.isLoading=!0,this.editedItem.nIdPlanPago=this.planPago.nIdPlanPago,this.editedItem.cNomDescPlan=this.planPago.cNomDescPlan,this.editedItem.usuSesion={nIdUsuario:1},this.editedIndex>-1?(Object.assign(this.empresas[this.editedIndex],this.editedItem),this.$http.put("/api/empresa/".concat(this.editedItem.nIdEmpresa),this.editedItem).then(function(t){console.log(t),e.isLoading=!1,e.close()}).catch(function(t){console.log(t.response.data),e.isLoading=!1,e.dialog=!0,e.errored=!0,e.errorMessage=t.response.data})):this.$http.post("/api/empresa",this.editedItem).then(function(t){console.log(t.data),e.editedItem.nIdEmpresa=t.data.nIdEmpresa,e.editedItem.contacto=t.data.contacto,e.empresas.push(e.editedItem),e.isLoading=!1,e.close()}).catch(function(t){console.log(t.response.data),e.isLoading=!1,e.dialog=!0,e.errored=!0,e.errorMessage=t.response.data}))},searchData:function(){var e=this;return this.empresas.some(function(t){return t.cRuc.toString().toLowerCase().indexOf(e.search.toLowerCase())>-1||t.cRazonSocial.toString().toLowerCase().indexOf(e.search.toLowerCase())>-1})},filterData:function(){var e=this;return this.empresas.filter(function(t){return t.cRuc.toString().toLowerCase().indexOf(e.search.toLowerCase())>-1||t.cRazonSocial.toString().toLowerCase().indexOf(e.search.toLowerCase())>-1})}},mounted:function(){var e=this;this.$http.get("/api/empresa").then(function(t){e.empresas=t.data}).catch(function(e){return console.log(e)}),this.$http.get("/api/planPago").then(function(t){e.planesPagos=t.data}).catch(function(e){return console.log(e)})}},pt=mt,vt=(a("4da4"),Object(l["a"])(pt,dt,ut,!1,null,null,null)),ft=vt.exports,gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-100 md-size-100"},[a("form",[a("md-card",[a("md-card-header",{attrs:{"data-background-color":"green"}},[a("h4",{staticClass:"title"},[e._v("Registro de perfil")]),a("p",{staticClass:"category"},[e._v("Complete los datos del perfil")])]),a("md-card-content",[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-small-size-100 md-size-100"},[a("md-field",[a("label",[e._v("Nombre")]),a("md-input",{attrs:{type:"text"},model:{value:e.nombre,callback:function(t){e.nombre=t},expression:"nombre"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-100"},[a("md-field",[a("label",[e._v("Descripcion")]),a("md-input",{attrs:{type:"text"},model:{value:e.descripcion,callback:function(t){e.descripcion=t},expression:"descripcion"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-50"},[a("md-list",[a("md-subheader",[e._v("Menus")]),e._l(e.menus,function(t,s){return a("md-list-item",{key:s,on:{click:function(a){return e.agregarPermiso(t)}}},[e._v("\r\n                  "+e._s(t)+"\r\n                ")])})],2)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-50"},[a("md-list",[a("md-subheader",[e._v("Accesos")]),e._l(e.permisos,function(t,s){return a("md-list-item",{key:s,on:{click:function(a){return e.quitarPermiso(t)}}},[e._v("\r\n                  "+e._s(t)+"\r\n                ")])})],2)],1),a("div",{staticClass:"md-layout-item md-size-100 text-right"},[a("md-button",{staticClass:"md-raised md-success"},[e._v("Registrar")])],1)])])],1)],1)])])])},ht=[],bt={data:function(){return{nombre:"",descripcion:"",estado:"",menus:["Configuracion > Empresa","Configuracion > Usuario","Configuracion > Perfil"],permisos:[]}},methods:{agregarPermiso:function(e){this.permisos.push(e);var t=this.menus.findIndex(function(t){return t==e});this.menus.splice(t,1)},quitarPermiso:function(e){this.menus.push(e);var t=this.permisos.findIndex(function(t){return t==e});this.permisos.splice(t,1)}},mounted:function(){}},xt=bt,It=Object(l["a"])(xt,gt,ht,!1,null,null,null),Ct=It.exports,_t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-100 md-size-100"},[a("v-dialog",{attrs:{"max-width":"290"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Eliminar")]),a("v-card-text",[e._v("¿Está seguro de eliminar el registro?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1"},on:{click:function(t){e.dialogDelete=!1}}},[e._v("No")]),a("v-btn",{attrs:{color:"green darken-1"},on:{click:e.confirmDelete}},[e._v("Sí")])],1)],1)],1),e.isLoading?a("md-card",[a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v("\n              Por favor, espere...\n              "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1):e._e(),a("v-dialog",{attrs:{"max-width":"500px",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{staticClass:"inputNumber",attrs:{rules:e.dniRules,type:"number",label:"DNI",counter:8,required:""},model:{value:e.editedItem.cDNI,callback:function(t){e.$set(e.editedItem,"cDNI",t)},expression:"editedItem.cDNI"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[a("v-text-field",{attrs:{rules:e.campoRequerido,label:"Nombres",required:""},model:{value:e.editedItem.cNombre,callback:function(t){e.$set(e.editedItem,"cNombre",t)},expression:"editedItem.cNombre"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Apellido paterno",rules:e.campoRequerido,required:""},model:{value:e.editedItem.cApePaterno,callback:function(t){e.$set(e.editedItem,"cApePaterno",t)},expression:"editedItem.cApePaterno"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Apellido materno",rules:e.campoRequerido,required:""},model:{value:e.editedItem.cApeMaterno,callback:function(t){e.$set(e.editedItem,"cApeMaterno",t)},expression:"editedItem.cApeMaterno"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("div",{staticClass:"caption theme--light v-label"},[e._v("Fecha de nacimiento")]),a("datepicker",{attrs:{language:e.es,placeholder:"Seleccione fecha","wrapper-class":"v-text-field__slot","calendar-button":"",format:"dd/MM/yyyy","calendar-button-icon":"fa fa-calendar"},model:{value:e.editedItem.dFecNacimiento,callback:function(t){e.$set(e.editedItem,"dFecNacimiento",t)},expression:"editedItem.dFecNacimiento"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Email",rules:e.emailRules,required:""},model:{value:e.editedItem.cEmail,callback:function(t){e.$set(e.editedItem,"cEmail",t)},expression:"editedItem.cEmail"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Celular",rules:e.campoRequerido,required:""},model:{value:e.editedItem.cCelular,callback:function(t){e.$set(e.editedItem,"cCelular",t)},expression:"editedItem.cCelular"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-combobox",{attrs:{"item-text":"cRazonSocial","item-value":"nIdEmpresa",items:e.empresas,label:"Empresa",rules:[function(e){return-1!=e.nIdEmpresa||"El campo es requerido"}],required:"",disabled:e.disabledEmpresa,"return-object":""},model:{value:e.empresaEdited,callback:function(t){e.empresaEdited=t},expression:"empresaEdited"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-combobox",{attrs:{"item-text":"cNomUniOpe","item-value":"nIdUniOpe",items:e.unidadesOperativasEdited,label:"Unidad Operativa",rules:[function(e){return-1!=e.nIdUniOpe||"El campo es requerido"}],required:"","return-object":""},model:{value:e.unidadOperativaEdited,callback:function(t){e.unidadOperativaEdited=t},expression:"unidadOperativaEdited"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-combobox",{attrs:{"item-text":"cNomSurcursal","item-value":"nIdsucursal",items:e.sucursalesEdited,label:"Sucursal",rules:[function(e){return-1!=e.nIdsucursal||"El campo es requerido"}],required:"","return-object":""},model:{value:e.sucursalEdited,callback:function(t){e.sucursalEdited=t},expression:"sucursalEdited"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-combobox",{attrs:{"item-text":"cNomArea","item-value":"nIdArea",items:e.areasEdited,label:"Área",rules:[function(e){return-1!=e.nIdArea||"El campo es requerido"}],required:"","return-object":""},model:{value:e.areaEdited,callback:function(t){e.areaEdited=t},expression:"areaEdited"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-combobox",{attrs:{"item-text":"cNomCargo","item-value":"nIdCargo",items:e.cargosEdited,label:"Cargo",rules:[function(e){return-1!=e.nIdCargo||"El campo es requerido"}],required:"","return-object":""},model:{value:e.cargoEdited,callback:function(t){e.cargoEdited=t},expression:"cargoEdited"}})],1),a("v-flex",[a("v-checkbox",{attrs:{color:"green"},scopedSlots:e._u([{key:"label",fn:function(){return[a("div",{on:{click:function(e){e.stopPropagation()}}},[e._v("Activo")])]},proxy:!0}]),model:{value:e.editedItem.bActivo,callback:function(t){e.$set(e.editedItem,"bActivo",t)},expression:"editedItem.bActivo"}})],1)],1)],1)],1),e.errored?a("div",{staticClass:"v-messages theme--light error--text pl-3"},[a("div",{staticClass:"v-messages__wrapper"},[a("div",{staticClass:"v-messages__message"},[e._v(e._s(e.errorMessage))])])]):e._e()],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"background-color":"#3198ca !important",color:"white !important"},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"success",disabled:!e.valid},on:{click:e.save}},[e._v("Save")])],1)],1)],1),a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Usuarios")]),a("v-divider",{staticClass:"mx-2",staticStyle:{"max-height":"0px !important"},attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"info"},on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[e._v("Nuevo usuario")])],1),a("div",{staticStyle:{position:"static !important"}},[a("v-card",[a("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[a("v-layout",{attrs:{row:"",wrap:"","justify-space-between":""}},[a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-combobox",{attrs:{"item-text":"cRazonSocial","item-value":"nIdEmpresa",items:e.empresas,label:"Empresa",disabled:e.disabledEmpresa,"return-object":""},model:{value:e.empresa,callback:function(t){e.empresa=t},expression:"empresa"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-combobox",{attrs:{"item-text":"cNomUniOpe","item-value":"nIdUniOpe",items:e.unidadesOperativas,label:"Unidad Operativa","return-object":""},model:{value:e.unidadOperativa,callback:function(t){e.unidadOperativa=t},expression:"unidadOperativa"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-combobox",{attrs:{"item-text":"cNomSurcursal","item-value":"nIdsucursal",items:e.sucursales,label:"Sucursal","return-object":""},model:{value:e.sucursal,callback:function(t){e.sucursal=t},expression:"sucursal"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-combobox",{attrs:{"item-text":"cNomArea","item-value":"nIdArea",items:e.areas,label:"Área","return-object":""},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-combobox",{attrs:{"item-text":"cNomCargo","item-value":"nIdCargo",items:e.cargos,label:"Cargo","return-object":""},model:{value:e.cargo,callback:function(t){e.cargo=t},expression:"cargo"}})],1)],1)],1),a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"search",label:"Buscar por DNI / Nombre","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.usuarios,search:e.search,filter:e.searchData,"custom-filter":e.filterData,"rows-per-page-items":e.rowsPerPageItems,"no-data-text":"''","rows-per-page-text":"Filas por página"},scopedSlots:e._u([{key:"headerCell",fn:function(t){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(t.header.text))]),a("span",[e._v(e._s(t.header.text))])])]}},{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cDNI))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cCodUsu))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cNomNivel))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cNombre))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cApePaterno))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cApeMaterno))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(e._f("formatDate")(t.item.dFecNacimiento)))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cEmail))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cCelular))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cRazonSocial))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cNomUniOpe))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cNomSurcursal))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cNomArea))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cNomCargo))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.bActivo?"Activo":"Inactivo"))]),a("td",{staticClass:"justify-start layout"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.editItem(t.item)}}},[e._v("edit")]),a("v-icon",{attrs:{small:""},on:{click:function(a){return a.stopPropagation(),e.deleteItem(t.item)}}},[e._v("delete")])],1)]}},{key:"no-results",fn:function(){return[a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("No se encontraron resultados")])]},proxy:!0}])})],1)],1)],1)])])},yt=[],St=a("fa33"),Ot=a("2430"),wt={name:"TableSearch",components:{Datepicker:St["a"]},data:function(){return{es:Ot["es"],errored:!1,errorMessage:null,isLoading:!1,date:(new Date).toISOString().substr(0,10),menu:!1,modal:!1,menu2:!1,valid:!0,dialog:!1,dialogDelete:!1,search:"",rowsPerPageItems:[10,20,30,40],headers:[{text:"DNI",value:"cDNI",width:"1%"},{text:"Username",value:"cCodUsu",width:"1%"},{text:"Tipo de usuario",value:"cNomNivel",width:"1%"},{text:"Nombre",value:"cNombre",width:"1%"},{text:"Apellido paterno",value:"cApePaterno",width:"1%"},{text:"Apellido materno",value:"cApeMaterno",width:"1%"},{text:"Fecha de nacimiento",value:"dFecNacimiento",width:"1%"},{text:"Email",value:"cEmail",width:"1%"},{text:"Celular",value:"cCelular",width:"1%"},{text:"Empresa                                      .",value:"cRazonSocial",width:"1%"},{text:"Unidad Operativa",value:"cNomUniOpe",width:"1%"},{text:"Sucursal",value:"cNomSurcursal",width:"1%"},{text:"Area",value:"cNomArea",width:"1%"},{text:"Cargo",value:"cNomCargo",width:"1%"},{text:"Activo",value:"bActivo",width:"1%"},{text:"Acciones",value:"cDNI",sortable:!1,width:"1%"}],user:null,disabledEmpresa:!1,usuarios:[],empresas:[],unidadesOperativas:[],sucursales:[],areas:[],cargos:[],unidadesOperativasEdited:[],sucursalesEdited:[],areasEdited:[],cargosEdited:[],editedIndex:-1,itemToDelete:null,editedItem:{nIdUsuario:0,cDNI:"",cNombre:"",cApePaterno:"",cApeMaterno:"",dFecNacimiento:"",cEmail:"",cCelular:"",nIdsucursal:-1,nIdUniOpe:-1,nIdEmpresa:-1,nIdArea:-1,nIdCargo:-1,cRazonSocial:"",cNomUniOpe:"",cNomSurcursal:"",cNomArea:"",cNomCargo:"",usuSesion:{UserId:1,Username:"jxalxi"}},defaultItem:{nIdUsuario:0,cDNI:"",cNombre:"",cApePaterno:"",cApeMaterno:"",dFecNacimiento:"",cEmail:"",cCelular:"",nIdsucursal:-1,nIdUniOpe:-1,nIdEmpresa:-1,nIdArea:-1,nIdCargo:-1,cRazonSocial:"",cNomUniOpe:"",cNomSurcursal:"",cNomArea:"",cNomCargo:"",usuSesion:{UserId:1,Username:"jxalxi"}},empresa:{nIdEmpresa:-1,cRazonSocial:""},unidadOperativa:{nIdUniOpe:-1,cNomUniOpe:""},sucursal:{nIdsucursal:-1,cNomSurcursal:""},area:{nIdArea:-1,cNomArea:""},cargo:{nIdCargo:-1,cNomCargo:""},empresaEdited:{nIdEmpresa:-1,cRazonSocial:""},unidadOperativaEdited:{nIdUniOpe:-1,cNomUniOpe:""},sucursalEdited:{nIdsucursal:-1,cNomSurcursal:""},areaEdited:{nIdArea:-1,cNomArea:""},cargoEdited:{nIdCargo:-1,cNomCargo:""},dniRules:[function(e){return!!e||"El campo es requerido"},function(e){return 8==e.length||"DNI debe tener 8 caracteres"},function(e){return/^\d*$/.test(e)||"DNI sólo puede contener números"}],emailRules:[function(e){return!!e||"El campo es requerido"},function(e){return/.+@.+/.test(e)||"Email no es válido"}],campoRequerido:[function(e){return!!e||"El campo es requerido"}]}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo usuario":"Editar usuario"}},watch:{empresa:function(e){var t=this;console.log(e.nIdEmpresa),this.$http.get("/api/unidadOperativa?nIdEmpresa=".concat(e.nIdEmpresa)).then(function(e){t.unidadesOperativas=e.data,t.unidadOperativa={nIdUniOpe:-1,cNomUniOpe:""}}).catch(function(e){return console.log(e)}),this.$http.get("/api/area?nIdEmpresa=".concat(e.nIdEmpresa)).then(function(e){t.areas=e.data,t.area={nIdArea:-1,cNomArea:""}}).catch(function(e){return console.log(e)})},unidadOperativa:function(e){var t=this;this.$http.get("/api/sucursal?nIdUniOpe=".concat(e.nIdUniOpe)).then(function(e){t.sucursales=e.data,t.sucursal={nIdsucursal:-1,cNomSurcursal:""}}).catch(function(e){return console.log(e)})},area:function(e){var t=this;this.$http.get("/api/cargo?nIdArea=".concat(e.nIdArea)).then(function(e){t.cargos=e.data,t.cargo={nIdCargo:-1,cNomCargo:""}}).catch(function(e){return console.log(e)})},empresaEdited:function(e){var t=this;console.log(e.nIdEmpresa),this.$http.get("/api/unidadOperativa?nIdEmpresa=".concat(e.nIdEmpresa)).then(function(e){t.unidadesOperativasEdited=e.data,t.unidadOperativaEdited={nIdUniOpe:-1,cNomUniOpe:""}}).catch(function(e){return console.log(e)}),this.$http.get("/api/area?nIdEmpresa=".concat(e.nIdEmpresa)).then(function(e){t.areasEdited=e.data,t.areaEdited={nIdArea:-1,cNomArea:""}}).catch(function(e){return console.log(e)})},unidadOperativaEdited:function(e){var t=this;this.$http.get("/api/sucursal?nIdUniOpe=".concat(e.nIdUniOpe)).then(function(e){t.sucursalesEdited=e.data,t.sucursalEdited={nIdsucursal:-1,cNomSurcursal:""}}).catch(function(e){return console.log(e)})},areaEdited:function(e){var t=this;this.$http.get("/api/cargo?nIdArea=".concat(e.nIdArea)).then(function(e){t.cargosEdited=e.data,t.cargoEdited={nIdCargo:-1,cNomCargo:""}}).catch(function(e){return console.log(e)})}},methods:{editItem:function(e){this.editedIndex=this.usuarios.indexOf(e),this.editedItem=Object.assign({},e),this.empresaEdited={nIdEmpresa:this.editedItem.nIdEmpresa,cRazonSocial:this.editedItem.cRazonSocial},this.unidadOperativaEdited={nIdUniOpe:this.editedItem.nIdUniOpe,cNomUniOpe:this.editedItem.cNomUniOpe},this.sucursalEdited={nIdsucursal:this.editedItem.nIdsucursal,cNomSurcursal:this.editedItem.cNomSurcursal},this.areaEdited={nIdArea:this.editedItem.nIdArea,cNomArea:this.editedItem.cNomArea},this.cargoEdited={nIdCargo:this.editedItem.nIdCargo,cNomCargo:this.editedItem.cNomCargo},this.dialog=!0},deleteItem:function(e){this.dialogDelete=!0,this.itemToDelete=e},confirmDelete:function(){var e=this,t=this.itemToDelete.nIdUsuario,a=1;this.$http.delete("/api/usuario/".concat(t,"/").concat(a)).then(function(a){console.log(a);var s=e.usuarios.findIndex(function(e){return e.nIdUsuario==t});console.log("nIdUsuario",t),console.log(e.usuarios),console.log(s),e.usuarios.splice(s,1)}).catch(function(e){return console.log(e)}),this.dialogDelete=!1},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1,e.$refs.form.reset(),e.errorMessage="",e.errored=!1},300)},save:function(){var e=this;this.$refs.form.validate()&&(this.dialog=!1,this.isLoading=!0,this.editedItem.nIdEmpresa=this.empresaEdited.nIdEmpresa,this.editedItem.cRazonSocial=this.empresaEdited.cRazonSocial,this.editedItem.nIdsucursal=this.sucursalEdited.nIdsucursal,this.editedItem.cNomSurcursal=this.sucursalEdited.cNomSurcursal,this.editedItem.nIdUniOpe=this.unidadOperativaEdited.nIdUniOpe,this.editedItem.cNomUniOpe=this.unidadOperativaEdited.cNomUniOpe,this.editedItem.nIdArea=this.areaEdited.nIdArea,this.editedItem.cNomArea=this.areaEdited.cNomArea,this.editedItem.nIdCargo=this.cargoEdited.nIdCargo,this.editedItem.cNomCargo=this.cargoEdited.cNomCargo,this.editedItem.usuSesion={nIdUsuario:1},this.editedIndex>-1?(Object.assign(this.usuarios[this.editedIndex],this.editedItem),this.$http.put("/api/usuario/".concat(this.editedItem.nIdUsuario),this.editedItem).then(function(t){console.log(t),e.isLoading=!1,e.close()}).catch(function(t){console.log(t.response.data),e.isLoading=!1,e.dialog=!0,e.errored=!0,e.errorMessage=t.response.data})):this.$http.post("/api/usuario",this.editedItem).then(function(t){console.log(t.data),e.editedItem.nIdUsuario=t.data.nIdUsuario,e.editedItem.cCodUsu=t.data.cCodUsu,e.usuarios.push(e.editedItem),e.isLoading=!1,e.close()}).catch(function(t){console.log(t.response.data),e.isLoading=!1,e.dialog=!0,e.errored=!0,e.errorMessage=t.response.data}))},searchData:function(){var e=this;return this.usuarios.some(function(t){return(t.cDNI.toString().toLowerCase().indexOf(e.search.toLowerCase())>-1||t.cNombre.toString().toLowerCase().indexOf(e.search.toLowerCase())>-1||t.cApePaterno.toString().toLowerCase().indexOf(e.search.toLowerCase())>-1||t.cApeMaterno.toString().toLowerCase().indexOf(e.search.toLowerCase())>-1)&&t.nIdEmpresa==(-1==e.empresa.nIdEmpresa?t.nIdEmpresa:e.empresa.nIdEmpresa)&&t.nIdUniOpe==(-1==e.unidadOperativa.nIdUniOpe?t.nIdUniOpe:e.unidadOperativa.nIdUniOpe)&&t.nIdsucursal==(-1==e.sucursal.nIdsucursal?t.nIdsucursal:e.sucursal.nIdsucursal)&&t.nIdArea==(-1==e.area.nIdArea?t.nIdArea:e.area.nIdArea)&&t.nIdCargo==(-1==e.cargo.nIdCargo?t.nIdCargo:e.cargo.nIdCargo)})},filterData:function(){var e=this;return this.usuarios.filter(function(t){return(t.cDNI.toString().toLowerCase().indexOf(e.search.toLowerCase())>-1||t.cNombre.toString().toLowerCase().indexOf(e.search.toLowerCase())>-1||t.cApePaterno.toString().toLowerCase().indexOf(e.search.toLowerCase())>-1||t.cApeMaterno.toString().toLowerCase().indexOf(e.search.toLowerCase())>-1)&&t.nIdEmpresa==(-1==e.empresa.nIdEmpresa?t.nIdEmpresa:e.empresa.nIdEmpresa)&&t.nIdUniOpe==(-1==e.unidadOperativa.nIdUniOpe?t.nIdUniOpe:e.unidadOperativa.nIdUniOpe)&&t.nIdsucursal==(-1==e.sucursal.nIdsucursal?t.nIdsucursal:e.sucursal.nIdsucursal)&&t.nIdArea==(-1==e.area.nIdArea?t.nIdArea:e.area.nIdArea)&&t.nIdCargo==(-1==e.cargo.nIdCargo?t.nIdCargo:e.cargo.nIdCargo)})}},mounted:function(){var e=this;this.$http.get("/api/usuario").then(function(t){e.usuarios=t.data}).catch(function(e){return console.log(e)}),this.$http.get("/api/empresa").then(function(t){e.empresas=t.data;var a=localStorage.getItem("user");if(e.user=JSON.parse(a),e.user.nIdNivel>1){var s=e.empresas.findIndex(function(t){return t.nIdEmpresa==e.user.nIdEmpresa});e.empresa={nIdEmpresa:e.user.nIdEmpresa,cRazonSocial:e.empresas[s].cRazonSocial},e.empresaEdited={nIdEmpresa:e.user.nIdEmpresa,cRazonSocial:e.empresas[s].cRazonSocial},e.disabledEmpresa=!0}}).catch(function(e){return console.log(e)})}},kt=wt,Nt=(a("c1a9"),Object(l["a"])(kt,_t,yt,!1,null,null,null)),At=Nt.exports,Et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-toolbar",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"},attrs:{height:"100px",flat:"",absolute:"",color:"#474A4F"}},[a("v-container",{attrs:{"align-content-center":"","justify-center":""}},[a("img",{attrs:{src:e.header,width:"250"}})])],1),a("div",{style:e.headerStyle},[a("div",{style:e.containerStyle},[a("div",{staticClass:"md-size-100 md-small-size-100 md-xsmall-size-100 md-medium-size-100"},[e.isLoading?a("md-card",[a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v("\n                Por favor, espere...\n                "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1):a("md-card",{staticClass:"md-card-login",class:{"md-card-hidden":e.cardHidden}},[a("md-card-content",[a("h4",{staticClass:"card-title"},[e._v("Iniciar sesión en su cuenta")]),a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("md-field",{staticClass:"md-form-group"},[a("md-icon",[e._v("email")]),a("v-text-field",{attrs:{label:"Correo electrónico",required:"",rules:e.campoRequerido},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("md-field",{staticClass:"md-form-group"},[a("md-icon",[e._v("lock_outline")]),a("v-text-field",{attrs:{label:"Contraseña",required:"",type:"password",rules:e.campoRequerido},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),e.errored?a("div",{staticClass:"v-messages theme--light error--text"},[a("div",{staticClass:"v-messages__wrapper"},[a("div",{staticClass:"v-messages__message"},[e._v(e._s(e.errorMessage))])])]):e._e()],1),a("md-card-actions",[a("md-button",{staticClass:"md-simple md-success md-lg",on:{click:e.olvidoClave}},[e._v("¿Olvidaste tu contraseña?")]),a("v-btn",{attrs:{small:"",depressed:"",color:"white",disabled:!e.valid},on:{click:e.login}},[e._v("Ingresar")])],1)],1)],1)])]),a("v-footer",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"},attrs:{absolute:"",height:"100px",color:"#474A4F"}},[a("div",{staticStyle:{color:"white","font-weight":"100"}},[e._v("Copyright © "+e._s((new Date).getFullYear())+" — Jammtech. Todos los derechos reservados.")])])],1)},Pt=[],Ut=a("2f62");s["default"].use(Ut["a"]);new Ut["a"].Store({state:{user:null},mutations:{setUser:function(e,t){e.user=t.usuario}}});function Dt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var $t={components:{LoginCard:Se},bodyClass:"login-page",data:function(){var e;return{valid:!0,errored:!1,errorMessage:null,isLoading:!1,dialog:!0,campoRequerido:[function(e){return!!e||"El campo es requerido"}],firstname:null,email:null,password:null,cardHidden:!0,containerStyle:(e={display:"-ms-flexbox"},Dt(e,"display","-webkit-flex"),Dt(e,"display","flex"),Dt(e,"alignItems","center"),Dt(e,"justifyContent","center"),Dt(e,"position","absolute"),Dt(e,"top","50%"),Dt(e,"left","50%"),Dt(e,"transform","translate3d(-50%,-50%,0)"),e)}},props:{header:{type:String,default:a("88bc")}},beforeMount:function(){setTimeout(this.showCard,400)},computed:{headerStyle:function(){return{backgroundColor:"#7AC043",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"100%",width:"100%",position:"fixed"}}},watch:{dialog:function(e){var t=this;e&&setTimeout(function(){return t.dialog=!1},4e3)}},methods:{showCard:function(){this.cardHidden=!1},login:function(){var e=this;if(this.$refs.form.validate()){this.isLoading=!0,this.dialog=!0;var t={cEmail:this.email,cContrasenia:this.password};this.$http.post("/api/sesion/iniciar",t).then(function(t){w.saveToken(t.data.cToken),localStorage.setItem("user",JSON.stringify(t.data)),console.log(t.data),t.data.bCambioClave?(e.$router.push(e.$router.history.current.query.redirect||"/"),e.isLoading=!1):(e.$router.push({name:"cambioClave",params:{email:e.email}}),e.isLoading=!1)}).catch(function(t){console.log(t),console.log(t.response),e.errored=!0,e.errorMessage=t.response.data,e.isLoading=!1})}},olvidoClave:function(){this.$router.push("/olvidoClave")}}},zt=$t,Rt=(a("825d"),Object(l["a"])(zt,Et,Pt,!1,null,null,null)),jt=Rt.exports,Mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-toolbar",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"},attrs:{height:"100px",flat:"",absolute:"",color:"#474A4F"}},[a("v-container",{attrs:{"align-content-center":"","justify-center":""}},[a("img",{attrs:{src:e.header,width:"250"}})])],1),a("div",{style:e.headerStyle},[a("div",{style:e.containerStyle},[a("div",{staticClass:"md-size-100 md-small-size-100 md-xsmall-size-100 md-medium-size-100"},[a("md-card",{staticClass:"md-card-login",class:{"md-card-hidden":e.cardHidden}},[a("md-card-header",{staticClass:"md-card-header-green"},[a("h4",{staticClass:"card-title"},[e._v("JAAMTECH")])]),a("md-card-content",[a("p",{staticClass:"description"},[e._v("Has ingresado por primera vez, por favor cambia tu clave")]),a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("md-field",{staticClass:"md-form-group"},[a("md-icon",[e._v("email")]),a("v-text-field",{attrs:{label:"Email",required:"",rules:e.campoRequerido},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("md-field",{staticClass:"md-form-group"},[a("md-icon",[e._v("lock_outline")]),a("v-text-field",{attrs:{label:"Contraseña",required:"",type:"password",rules:e.campoRequerido},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("md-field",{staticClass:"md-form-group"},[a("md-icon",[e._v("lock_outline")]),a("v-text-field",{attrs:{label:"Nueva contraseña",required:"",type:"password",rules:e.campoRequerido},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1)],1),e.errored?a("div",{staticClass:"v-messages theme--light error--text"},[a("div",{staticClass:"v-messages__wrapper"},[a("div",{staticClass:"v-messages__message"},[e._v(e._s(e.errorMessage))])])]):e._e()],1),a("md-card-actions",[a("md-button",{staticClass:"md-simple md-success md-lg",attrs:{disabled:!e.valid},on:{click:e.changePassword}},[e._v("Ingresar")])],1)],1)],1)])]),a("v-footer",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"},attrs:{absolute:"",height:"100px",color:"#474A4F"}},[a("div",{staticStyle:{color:"white","font-weight":"100"}},[e._v("Copyright © "+e._s((new Date).getFullYear())+" — Jammtech. Todos los derechos reservados.")])])],1)},Tt=[];function qt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ft={data:function(){var e;return{valid:!0,errored:!1,errorMessage:null,campoRequerido:[function(e){return!!e||"El campo es requerido"}],password:null,newPassword:null,cardHidden:!0,containerStyle:(e={display:"-ms-flexbox"},qt(e,"display","-webkit-flex"),qt(e,"display","flex"),qt(e,"alignItems","center"),qt(e,"justifyContent","center"),qt(e,"position","absolute"),qt(e,"top","50%"),qt(e,"left","50%"),qt(e,"transform","translate3d(-50%,-50%,0)"),e)}},props:{header:{type:String,default:a("88bc")},email:{type:String,required:!0}},beforeMount:function(){setTimeout(this.showCard,400)},computed:{headerStyle:function(){return{backgroundColor:"#7AC043",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"100%",width:"100%",position:"fixed"}}},methods:{showCard:function(){this.cardHidden=!1},changePassword:function(){var e=this;if(this.$refs.form.validate()){var t={cEmail:this.email,cContrasenia:this.password,cNuevaContrasenia:this.newPassword};this.$http.put("/api/sesion/cambioclave",t).then(function(t){e.$router.push("/")}).catch(function(t){e.errored=!0,e.errorMessage=t.response.data})}}}},Lt=Ft,Ht=(a("686e"),Object(l["a"])(Lt,Mt,Tt,!1,null,null,null)),Bt=Ht.exports,Jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-toolbar",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"},attrs:{height:"100px",flat:"",absolute:"",color:"#474A4F"}},[a("v-container",{attrs:{"align-content-center":"","justify-center":""}},[a("img",{attrs:{src:e.header,width:"250"}})])],1),a("div",{style:e.headerStyle},[a("div",{style:e.containerStyle},[a("div",{staticClass:"md-size-100 md-small-size-100 md-xsmall-size-100 md-medium-size-100"},[a("md-card",{staticClass:"md-card-login",class:{"md-card-hidden":e.cardHidden}},[a("md-card-header",{staticClass:"md-card-header-green"},[a("h4",{staticClass:"card-title"},[e._v("JAAMTECH")])]),e.success?a("md-card-content",[a("p",{staticClass:"description"},[e._v(e._s(e.message))])]):a("md-card-content",[a("p",{staticClass:"description"},[e._v("Ingrese su correo electrónico para enviarle su contraseña")]),a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("md-field",{staticClass:"md-form-group"},[a("md-icon",[e._v("email")]),a("v-text-field",{attrs:{label:"Correo electrónico",required:"",rules:e.campoRequerido},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1),e.errored?a("div",{staticClass:"v-messages theme--light error--text"},[a("div",{staticClass:"v-messages__wrapper"},[a("div",{staticClass:"v-messages__message"},[e._v(e._s(e.errorMessage))])])]):e._e()],1),e.success?e._e():a("md-card-actions",[a("md-button",{staticClass:"md-simple md-success md-lg",attrs:{disabled:!e.valid},on:{click:e.cancel}},[e._v("Cancelar")]),a("md-button",{staticClass:"md-simple md-success md-lg",attrs:{disabled:!e.valid&&e.isLoading},on:{click:e.resendPassword}},[e._v("Enviar email")])],1)],1)],1)])]),a("v-footer",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"},attrs:{absolute:"",height:"100px",color:"#474A4F"}},[a("div",{staticStyle:{color:"white","font-weight":"100"}},[e._v("Copyright © "+e._s((new Date).getFullYear())+" — Jammtech. Todos los derechos reservados.")])])],1)},Wt=[];function Kt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Gt={data:function(){var e;return{valid:!0,errored:!1,success:!1,errorMessage:null,message:null,email:null,campoRequerido:[function(e){return!!e||"El campo es requerido"}],cardHidden:!0,containerStyle:(e={display:"-ms-flexbox"},Kt(e,"display","-webkit-flex"),Kt(e,"display","flex"),Kt(e,"alignItems","center"),Kt(e,"justifyContent","center"),Kt(e,"position","absolute"),Kt(e,"top","50%"),Kt(e,"left","50%"),Kt(e,"transform","translate3d(-50%,-50%,0)"),e)}},props:{header:{type:String,default:a("88bc")}},beforeMount:function(){setTimeout(this.showCard,400)},computed:{headerStyle:function(){return{backgroundColor:"#7AC043",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"100%",width:"100%",position:"fixed"}}},methods:{showCard:function(){this.cardHidden=!1},resendPassword:function(){var e=this;if(this.isLoading=!0,this.$refs.form.validate()){var t={cEmail:this.email};this.$http.post("/api/sesion/enviarclave",t).then(function(t){e.isLoading=!1,e.success=!0,e.message="Te hemos enviado un mensaje con tu contraseña a tu correo. Revise en su bandeja de entrada o spam."}).catch(function(t){e.errored=!0,e.isLoading=!1,e.errorMessage=t.response.data})}},cancel:function(){this.$router.push("/login")}}},Yt=Gt,Xt=(a("497f"),Object(l["a"])(Yt,Jt,Wt,!1,null,null,null)),Zt=Xt.exports,Qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-100 md-size-100"},[a("v-dialog",{attrs:{"max-width":"500px",persistent:""},model:{value:e.dialogUniOpe,callback:function(t){e.dialogUniOpe=t},expression:"dialogUniOpe"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitleUniOpe))])]),a("v-card-text",[a("v-form",{ref:"formUniOpe",attrs:{"lazy-validation":""},model:{value:e.validUniOpe,callback:function(t){e.validUniOpe=t},expression:"validUniOpe"}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{rules:e.campoRequerido,label:"Nombre",required:""},model:{value:e.editedItemUniOpe.cNomUniOpe,callback:function(t){e.$set(e.editedItemUniOpe,"cNomUniOpe",t)},expression:"editedItemUniOpe.cNomUniOpe"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Descripcion"},model:{value:e.editedItemUniOpe.cDescripcion,callback:function(t){e.$set(e.editedItemUniOpe,"cDescripcion",t)},expression:"editedItemUniOpe.cDescripcion"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"background-color":"#3198ca !important",color:"white !important"},on:{click:e.closeUniOpe}},[e._v("Cancelar")]),a("v-btn",{attrs:{color:"success",disabled:!e.validUniOpe},on:{click:e.saveUniOpe}},[e._v("Guardar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px",persistent:""},model:{value:e.dialogSucursal,callback:function(t){e.dialogSucursal=t},expression:"dialogSucursal"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitleSucursal))])]),a("v-card-text",[a("v-form",{ref:"formSucursal",attrs:{"lazy-validation":""},model:{value:e.validSucursal,callback:function(t){e.validSucursal=t},expression:"validSucursal"}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{rules:e.campoRequerido,label:"Nombre",required:""},model:{value:e.editedItemSucursal.cNomSurcursal,callback:function(t){e.$set(e.editedItemSucursal,"cNomSurcursal",t)},expression:"editedItemSucursal.cNomSurcursal"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Descripcion"},model:{value:e.editedItemSucursal.cDescripcion,callback:function(t){e.$set(e.editedItemSucursal,"cDescripcion",t)},expression:"editedItemSucursal.cDescripcion"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"background-color":"#3198ca !important",color:"white !important"},on:{click:e.closeSucursal}},[e._v("Cancelar")]),a("v-btn",{attrs:{color:"success",disabled:!e.validUniOpe},on:{click:e.saveSucursal}},[e._v("Guardar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:e.dialogDeleteUniOpe,callback:function(t){e.dialogDeleteUniOpe=t},expression:"dialogDeleteUniOpe"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Eliminar")]),a("v-card-text",[e._v("¿Está seguro de eliminar el registro?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1"},on:{click:function(t){e.dialogDeleteUniOpe=!1}}},[e._v("No")]),a("v-btn",{attrs:{color:"green darken-1"},on:{click:e.confirmDeleteUniOpe}},[e._v("Sí")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:e.dialogDeleteSucursal,callback:function(t){e.dialogDeleteSucursal=t},expression:"dialogDeleteSucursal"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Eliminar")]),a("v-card-text",[e._v("¿Está seguro de eliminar el registro?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1"},on:{click:function(t){e.dialogDeleteSucursal=!1}}},[e._v("No")]),a("v-btn",{attrs:{color:"green darken-1"},on:{click:e.confirmDeleteSucursal}},[e._v("Sí")])],1)],1)],1),a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Unidades Operativas")]),a("v-divider",{staticClass:"mx-2",staticStyle:{"max-height":"0px !important"},attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"info",disabled:-1==e.empresa.nIdEmpresa},on:{click:function(t){t.stopPropagation(),e.dialogUniOpe=!0}}},[e._v("Nueva Unidad Operativa")])],1),a("div",{staticStyle:{position:"static !important"}},[a("v-card",[a("v-card-title",[a("v-combobox",{attrs:{"item-text":"cRazonSocial","item-value":"nIdEmpresa",items:e.empresas,label:"Empresa",disabled:e.disabledEmpresa,"return-object":""},model:{value:e.empresa,callback:function(t){e.empresa=t},expression:"empresa"}})],1),a("v-data-table",{attrs:{headers:e.headersUniOpe,"no-data-text":"''",items:e.unidadesOperativas,"item-key":"nIdUniOpe","single-expand":e.singleExpand,"rows-per-page-items":e.rowsPerPageItems,"rows-per-page-text":"Filas por página","show-expand":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",{attrs:{active:t.expanded},on:{click:function(e){t.expanded=!t.expanded}}},[a("td",{staticClass:"text-xs-left"},[a("div",{staticClass:"datatable-cell-wrapper"},[e._v(e._s(t.item.cNomUniOpe))])]),a("td",{staticClass:"text-xs-left"},[a("div",{staticClass:"datatable-cell-wrapper"},[e._v(e._s(t.item.cDescripcion))])]),a("td",{staticClass:"text-xs-right"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.editItemUniOpe(t.item)}}},[e._v("edit")]),a("v-icon",{attrs:{small:""},on:{click:function(a){return a.stopPropagation(),e.deleteItemUniOpe(t.item)}}},[e._v("delete")])],1)])]}},{key:"expand",fn:function(t){return[a("v-card",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",{staticStyle:{"font-size":"17px"}},[e._v(e._s(t.item.cNomUniOpe)+" > Sucursales")]),a("v-divider",{staticClass:"mx-2",staticStyle:{"max-height":"0px !important"},attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"info"},on:{click:function(a){return a.stopPropagation(),e.nuevaSucursal(t.item.nIdUniOpe)}}},[e._v("Nueva Sucursal")])],1),a("div",{key:e.sucursalKey},[a("v-data-table",{staticClass:"nested-table",attrs:{headers:e.headersSucursal,items:t.item.sucursales,"rows-per-page-items":e.rowsPerPageItems,"no-data-text":"''","rows-per-page-text":"Filas por página"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cNomSurcursal))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cDescripcion))]),a("td",{staticClass:"text-xs-right"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.editItemSucursal(t.item)}}},[e._v("edit")]),a("v-icon",{attrs:{small:""},on:{click:function(a){return a.stopPropagation(),e.deleteItemSucursal(t.item)}}},[e._v("delete")])],1)]}}],null,!0)})],1)],1)]}}])})],1)],1)],1)])])},Vt=[],ea={name:"TableSearch",data:function(){return{expanded:null,singleExpand:!0,validUniOpe:!0,validSucursal:!0,erroredUniOpe:!1,erroredSucursal:!1,errorMessageUniOpe:null,errorMessageSucursal:null,dialogUniOpe:!1,dialogSucursal:!1,dialogDeleteUniOpe:!1,dialogDeleteSucursal:!1,nIdUniOpeSelected:-1,search:"",rowsPerPageItems:[10,20,30,40],headersUniOpe:[{text:"Unidad Operativa",value:"cNomUniOpe"},{text:"Descripcion",value:"cDescripcion"},{text:"Acciones",value:"cNomUniOpe",sortable:!1,align:"right"}],headersSucursal:[{text:"Sucursal",value:"cNomSucursal"},{text:"Descripcion",value:"cDescripcion"},{text:"Acciones",value:"cNomSucursal",sortable:!1,align:"right"}],user:null,disabledEmpresa:!1,unidadesOperativas:[],empresas:[],editedIndexUniOpe:-1,editedIndexSucursal:-1,sucursalKey:1,itemToDeleteUniOpe:null,itemToDeleteSucursal:null,editedItemUniOpe:{nIdUniOpe:-1,cNomUniOpe:"",cDescripcion:"",nIdEmpresa:-1,nIdUsuCre:1},defaultItemUniOpe:{nIdUniOpe:-1,cNomUniOpe:"",cDescripcion:"",nIdEmpresa:-1,nIdUsuCre:1},editedItemSucursal:{nIdsucursal:-1,cNomSurcursal:"",cDescripcion:"",nIdUniOpe:-1,nIdUsuCre:1},defaultItemSucursal:{nIdsucursal:-1,cNomSurcursal:"",cDescripcion:"",nIdUniOpe:-1,nIdUsuCre:1},campoRequerido:[function(e){return!!e||"El campo es requerido"}],empresa:{nIdEmpresa:-1,cRazonSocial:""}}},computed:{formTitleUniOpe:function(){return-1===this.editedIndexUniOpe?"Nueva unidad operativa":"Editar unidad operativa"},formTitleSucursal:function(){return-1===this.editedIndexSucursal?"Nueva sucursal":"Editar sucursal"}},methods:{editItemUniOpe:function(e){this.editedIndexUniOpe=this.unidadesOperativas.indexOf(e),this.editedItemUniOpe=Object.assign({},e),this.dialogUniOpe=!0},editItemSucursal:function(e){var t=this.unidadesOperativas.findIndex(function(t){return t.nIdUniOpe==e.nIdUniOpe});this.editedIndexSucursal=this.unidadesOperativas[t].sucursales.indexOf(e),this.editedItemSucursal=Object.assign({},e),this.dialogSucursal=!0},deleteItemUniOpe:function(e){this.dialogDeleteUniOpe=!0,this.itemToDeleteUniOpe=e},deleteItemSucursal:function(e){this.dialogDeleteSucursal=!0,this.itemToDeleteSucursal=e},confirmDeleteUniOpe:function(){var e=this,t=this.itemToDeleteUniOpe.nIdUniOpe;console.log(t);var a=1;this.$http.delete("/api/unidadOperativa/".concat(t,"/").concat(a)).then(function(a){var s=e.unidadesOperativas.findIndex(function(e){return e.nIdUniOpe==t});e.unidadesOperativas.splice(s,1)}).catch(function(e){return console.log(e.response.data)}),this.dialogDeleteUniOpe=!1},confirmDeleteSucursal:function(){var e=this,t=this.itemToDeleteSucursal.nIdsucursal,a=1,s=this.unidadesOperativas.findIndex(function(t){return t.nIdUniOpe==e.itemToDeleteSucursal.nIdUniOpe});this.$http.delete("/api/sucursal/".concat(t,"/").concat(a)).then(function(a){var i=e.unidadesOperativas[s].sucursales.findIndex(function(e){return e.nIdsucursal==t});e.unidadesOperativas[s].sucursales.splice(i,1)}).catch(function(e){return console.log(e.response.data)}),this.dialogDeleteSucursal=!1},closeUniOpe:function(){this.dialogUniOpe=!1,this.editedItemUniOpe=Object.assign({},this.defaultItemUniOpe),this.editedIndexUniOpe=-1,this.erroredUniOpe=!1,this.errorMessageUniOpe=null,this.$refs.formUniOpe.reset()},closeSucursal:function(){this.dialogSucursal=!1,this.editedItemSucursal=Object.assign({},this.defaultItemSucursal),this.editedIndexSucursal=-1,this.erroredSucursal=!1,this.errorMessageSucursal=null,this.$refs.formSucursal.reset()},saveUniOpe:function(){var e=this;this.$refs.formUniOpe.validate()&&(console.log(this.editedItemUniOpe),this.editedItemUniOpe.nIdEmpresa=this.empresa.nIdEmpresa,this.editedIndexUniOpe>-1?(Object.assign(this.unidadesOperativas[this.editedIndexUniOpe],this.editedItemUniOpe),this.$http.put("/api/unidadOperativa/".concat(this.editedItemUniOpe.nIdUniOpe),this.editedItemUniOpe).then(function(t){console.log(t),e.closeUniOpe()}).catch(function(t){e.erroredUniOpe=!0,e.errorMessageUniOpe=t.response.data})):this.$http.post("/api/unidadOperativa",this.editedItemUniOpe).then(function(t){console.log(t),e.editedItemUniOpe.nIdUniOpe=t.data.nIdUniOpe,e.unidadesOperativas.push(e.editedItemUniOpe),e.closeUniOpe()}).catch(function(t){e.erroredUniOpe=!0,e.errorMessageUniOpe=t.response.data}))},saveSucursal:function(){var e=this;if(this.$refs.formSucursal.validate())if(this.editedIndexSucursal>-1){var t=this.unidadesOperativas.findIndex(function(t){return t.nIdUniOpe==e.editedItemSucursal.nIdUniOpe});Object.assign(this.unidadesOperativas[t].sucursales[this.editedIndexSucursal],this.editedItemSucursal),this.$http.put("/api/sucursal/".concat(this.editedItemSucursal.nIdsucursal),this.editedItemSucursal).then(function(t){console.log(t),e.closeSucursal()}).catch(function(t){console.log(t.response.data),e.erroredSucursal=!0,e.errorMessageSucursal=t.response.data})}else{this.editedItemSucursal.nIdUniOpe=this.nIdUniOpeSelected;var a=this.unidadesOperativas.findIndex(function(t){return t.nIdUniOpe==e.nIdUniOpeSelected});this.$http.post("/api/sucursal",this.editedItemSucursal).then(function(t){e.editedItemSucursal.nIdsucursal=t.data.nIdsucursal,console.log(e.unidadesOperativas[a].sucursales),null==e.unidadesOperativas[a].sucursales&&(e.unidadesOperativas[a].sucursales=[]),e.unidadesOperativas[a].sucursales.push(e.editedItemSucursal),e.sucursalKey++,e.closeSucursal()}).catch(function(t){console.log(t.response.data),e.erroredSucursal=!0,e.errorMessageSucursal=t.response.data})}},nuevaSucursal:function(e){this.nIdUniOpeSelected=e,console.log(e),this.dialogSucursal=!0}},mounted:function(){var e=this;this.$http.get("/api/empresa/empresas").then(function(t){e.empresas=t.data;var a=localStorage.getItem("user");if(e.user=JSON.parse(a),e.user.nIdNivel>1){var s=e.empresas.findIndex(function(t){return t.nIdEmpresa==e.user.nIdEmpresa});e.empresa={nIdEmpresa:e.user.nIdEmpresa,cRazonSocial:e.empresas[s].cRazonSocial},e.disabledEmpresa=!0}}).catch(function(e){return console.log(e)})},watch:{empresa:function(e){var t=this;console.log(e.nIdEmpresa),this.$http.get("/api/unidadoperativa/sucursal?nIdEmpresa=".concat(e.nIdEmpresa)).then(function(e){t.unidadesOperativas=e.data}).catch(function(e){return console.log(e)})}}},ta=ea,aa=(a("7292"),Object(l["a"])(ta,Qt,Vt,!1,null,null,null)),sa=aa.exports,ia=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-100 md-size-100"},[a("v-dialog",{attrs:{"max-width":"500px",persistent:""},model:{value:e.dialogArea,callback:function(t){e.dialogArea=t},expression:"dialogArea"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitleArea))])]),a("v-card-text",[a("v-form",{ref:"formArea",attrs:{"lazy-validation":""},model:{value:e.validArea,callback:function(t){e.validArea=t},expression:"validArea"}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{rules:e.campoRequerido,label:"Nombre",required:""},model:{value:e.editedItemArea.cNomArea,callback:function(t){e.$set(e.editedItemArea,"cNomArea",t)},expression:"editedItemArea.cNomArea"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"background-color":"#3198ca !important",color:"white !important"},on:{click:e.closeArea}},[e._v("Cancelar")]),a("v-btn",{attrs:{color:"success",disabled:!e.validArea},on:{click:e.saveArea}},[e._v("Guardar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px",persistent:""},model:{value:e.dialogCargo,callback:function(t){e.dialogCargo=t},expression:"dialogCargo"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitleCargo))])]),a("v-card-text",[a("v-form",{ref:"formCargo",attrs:{"lazy-validation":""},model:{value:e.validCargo,callback:function(t){e.validCargo=t},expression:"validCargo"}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{rules:e.campoRequerido,label:"Nombre",required:""},model:{value:e.editedItemCargo.cNomCargo,callback:function(t){e.$set(e.editedItemCargo,"cNomCargo",t)},expression:"editedItemCargo.cNomCargo"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"background-color":"#3198ca !important",color:"white !important"},on:{click:e.closeCargo}},[e._v("Cancelar")]),a("v-btn",{attrs:{color:"success",disabled:!e.validArea},on:{click:e.saveCargo}},[e._v("Guardar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:e.dialogDeleteArea,callback:function(t){e.dialogDeleteArea=t},expression:"dialogDeleteArea"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Eliminar")]),a("v-card-text",[e._v("¿Está seguro de eliminar el registro?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"success"},on:{click:function(t){e.dialogDeleteArea=!1}}},[e._v("No")]),a("v-btn",{attrs:{color:"success"},on:{click:e.confirmDeleteArea}},[e._v("Sí")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:e.dialogDeleteCargo,callback:function(t){e.dialogDeleteCargo=t},expression:"dialogDeleteCargo"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Eliminar")]),a("v-card-text",[e._v("¿Está seguro de eliminar el registro?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1"},on:{click:function(t){e.dialogDeleteCargo=!1}}},[e._v("No")]),a("v-btn",{attrs:{color:"success"},on:{click:e.confirmDeleteCargo}},[e._v("Sí")])],1)],1)],1),a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Areas")]),a("v-divider",{staticClass:"mx-2",staticStyle:{"max-height":"0px !important"},attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"info",disabled:-1==e.empresa.nIdEmpresa},on:{click:function(t){t.stopPropagation(),e.dialogArea=!0}}},[e._v("Nueva area")])],1),a("div",{staticStyle:{position:"static !important"}},[a("v-card",[a("v-card-title",[a("v-combobox",{attrs:{"item-text":"cRazonSocial","item-value":"nIdEmpresa",items:e.empresas,label:"Empresa",disabled:e.disabledEmpresa,"return-object":""},model:{value:e.empresa,callback:function(t){e.empresa=t},expression:"empresa"}})],1),a("v-data-table",{attrs:{headers:e.headersArea,"no-data-text":"''",items:e.areas,"item-key":"nIdArea","single-expand":e.singleExpand,"rows-per-page-items":e.rowsPerPageItems,"rows-per-page-text":"Filas por página","show-expand":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",{attrs:{active:t.expanded},on:{click:function(e){t.expanded=!t.expanded}}},[a("td",[a("div",{staticClass:"datatable-cell-wrapper"},[e._v(e._s(t.item.cNomArea))])]),a("td",{staticClass:"text-xs-right"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.editItemArea(t.item)}}},[e._v("edit")]),a("v-icon",{attrs:{small:""},on:{click:function(a){return a.stopPropagation(),e.deleteItemArea(t.item)}}},[e._v("delete")])],1)])]}},{key:"expand",fn:function(t){return[a("v-card",{staticStyle:{"background-color":"#e8e8e8!important"},attrs:{flat:"",elevation:"2",color:"#D1D1D1"}},[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",{staticStyle:{"font-size":"17px"}},[e._v(e._s(t.item.cNomArea)+" > Cargos")]),a("v-divider",{staticClass:"mx-2",staticStyle:{"max-height":"0px !important"},attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"info"},on:{click:function(a){return a.stopPropagation(),e.nuevaCargo(t.item.nIdArea)}}},[e._v("Nuevo Cargo")])],1),a("div",{key:e.cargoKey},[a("v-data-table",{staticClass:"nested-table",attrs:{headers:e.headersCargo,items:t.item.cargos,"rows-per-page-items":e.rowsPerPageItems,"no-data-text":"''","item-key":"nIdCargo","rows-per-page-text":"Filas por página"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cNomCargo))]),a("td",{staticClass:"text-xs-right"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.editItemCargo(t.item)}}},[e._v("edit")]),a("v-icon",{attrs:{small:""},on:{click:function(a){return a.stopPropagation(),e.deleteItemCargo(t.item)}}},[e._v("delete")])],1)]}}],null,!0)})],1)],1)]}}])})],1)],1)],1)])])},ra=[],na={name:"TableSearch",data:function(){return{expanded:null,singleExpand:!0,validArea:!0,validCargo:!0,erroredArea:!1,erroredCargo:!1,errorMessageArea:null,errorMessageCargo:null,dialogArea:!1,dialogCargo:!1,dialogDeleteArea:!1,dialogDeleteCargo:!1,nIdAreaSelected:-1,search:"",rowsPerPageItems:[10,20,30,40],headersArea:[{text:"Area",value:"cNomArea"},{text:"Acciones",value:"cNomArea",sortable:!1,align:"right"}],headersCargo:[{text:"Cargo",value:"cNomCargo"},{text:"Acciones",value:"cNomCargo",sortable:!1,align:"right"}],user:null,disabledEmpresa:!1,areas:[],empresas:[],editedIndexArea:-1,editedIndexCargo:-1,itemToDeleteArea:null,itemToDeleteCargo:null,cargoKey:1,editedItemArea:{nIdArea:-1,cNomArea:"",nIdEmpresa:-1,nIdUsuCre:1},defaultItemArea:{nIdArea:-1,cNomArea:"",nIdEmpresa:-1,nIdUsuCre:1},editedItemCargo:{nIdCargo:-1,cNomCargo:"",nIdArea:-1,nIdUsuCre:1},defaultItemCargo:{nIdCargo:-1,cNomCargo:"",nIdArea:-1,nIdUsuCre:1},campoRequerido:[function(e){return!!e||"El campo es requerido"}],empresa:{nIdEmpresa:-1,cRazonSocial:""}}},computed:{formTitleArea:function(){return-1===this.editedIndexArea?"Nueva area":"Editar area"},formTitleCargo:function(){return-1===this.editedIndexCargo?"Nueva cargo":"Editar cargo"}},methods:{editItemArea:function(e){this.editedIndexArea=this.areas.indexOf(e),this.editedItemArea=Object.assign({},e),this.dialogArea=!0},editItemCargo:function(e){var t=this.areas.findIndex(function(t){return t.nIdArea==e.nIdArea});this.editedIndexCargo=this.areas[t].cargos.indexOf(e),this.editedItemCargo=Object.assign({},e),this.dialogCargo=!0},deleteItemArea:function(e){this.dialogDeleteArea=!0,this.itemToDeleteArea=e},deleteItemCargo:function(e){this.dialogDeleteCargo=!0,this.itemToDeleteCargo=e},confirmDeleteArea:function(){var e=this,t=this.itemToDeleteArea.nIdArea;console.log(t);var a=1;this.$http.delete("/api/area/".concat(t,"/").concat(a)).then(function(a){var s=e.areas.findIndex(function(e){return e.nIdArea==t});e.areas.splice(s,1)}).catch(function(e){return console.log(e.response.data)}),this.dialogDeleteArea=!1},confirmDeleteCargo:function(){var e=this,t=this.itemToDeleteCargo.nIdCargo,a=1,s=this.areas.findIndex(function(t){return t.nIdArea==e.itemToDeleteCargo.nIdArea});this.$http.delete("/api/cargo/".concat(t,"/").concat(a)).then(function(a){var i=e.areas[s].cargos.findIndex(function(e){return e.nIdCargo==t});e.areas[s].cargos.splice(i,1)}).catch(function(e){return console.log(e.response.data)}),this.dialogDeleteCargo=!1},closeArea:function(){this.dialogArea=!1,this.editedItemArea=Object.assign({},this.defaultItemArea),this.editedIndexArea=-1,this.erroredArea=!1,this.errorMessageArea=null,this.$refs.formArea.reset()},closeCargo:function(){this.dialogCargo=!1,this.editedItemCargo=Object.assign({},this.defaultItemCargo),this.editedIndexCargo=-1,this.erroredCargo=!1,this.errorMessageCargo=null,this.$refs.formCargo.reset()},saveArea:function(){var e=this;this.$refs.formArea.validate()&&(console.log(this.editedItemArea),this.editedItemArea.nIdEmpresa=this.empresa.nIdEmpresa,this.editedIndexArea>-1?(Object.assign(this.areas[this.editedIndexArea],this.editedItemArea),this.$http.put("/api/area/".concat(this.editedItemArea.nIdArea),this.editedItemArea).then(function(t){console.log(t),e.closeArea()}).catch(function(t){e.erroredArea=!0,e.errorMessageArea=t.response.data})):this.$http.post("/api/area",this.editedItemArea).then(function(t){console.log(t),e.editedItemArea.nIdArea=t.data.nIdArea,e.areas.push(e.editedItemArea),e.closeArea()}).catch(function(t){e.erroredArea=!0,e.errorMessageArea=t.response.data}))},saveCargo:function(){var e=this;if(this.$refs.formCargo.validate())if(this.editedIndexCargo>-1){var t=this.areas.findIndex(function(t){return t.nIdArea==e.editedItemCargo.nIdArea});Object.assign(this.areas[t].cargos[this.editedIndexCargo],this.editedItemCargo),this.$http.put("/api/cargo/".concat(this.editedItemCargo.nIdCargo),this.editedItemCargo).then(function(t){console.log(t),e.closeCargo()}).catch(function(t){console.log(t.response.data),e.erroredCargo=!0,e.errorMessageCargo=t.response.data})}else{this.editedItemCargo.nIdArea=this.nIdAreaSelected;var a=this.areas.findIndex(function(t){return t.nIdArea==e.nIdAreaSelected});this.$http.post("/api/cargo",this.editedItemCargo).then(function(t){e.editedItemCargo.nIdCargo=t.data.nIdCargo,null!=e.areas[a].cargos&&void 0!=e.areas[a].cargos||(e.areas[a].cargos=[]),e.areas[a].cargos.push(e.editedItemCargo),e.cargoKey++,e.closeCargo()}).catch(function(t){console.log(t.response.data),e.erroredCargo=!0,e.errorMessageCargo=t.response.data})}},nuevaCargo:function(e){this.nIdAreaSelected=e,console.log(e),this.dialogCargo=!0}},mounted:function(){var e=this;this.$http.get("/api/empresa/empresas").then(function(t){e.empresas=t.data;var a=localStorage.getItem("user");if(e.user=JSON.parse(a),e.user.nIdNivel>1){var s=e.empresas.findIndex(function(t){return t.nIdEmpresa==e.user.nIdEmpresa});e.empresa={nIdEmpresa:e.user.nIdEmpresa,cRazonSocial:e.empresas[s].cRazonSocial},e.disabledEmpresa=!0}}).catch(function(e){return console.log(e)})},watch:{empresa:function(e){var t=this;console.log(e.nIdEmpresa),this.$http.get("/api/area/cargo?nIdEmpresa=".concat(e.nIdEmpresa)).then(function(e){t.areas=e.data,console.log(t.areas)}).catch(function(e){return console.log(e)})}}},oa=na,la=(a("c896"),Object(l["a"])(oa,ia,ra,!1,null,null,null)),ca=la.exports,da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-100 md-size-100"},[a("v-dialog",{attrs:{"max-width":"290"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Eliminar")]),a("v-card-text",[e._v("¿Está seguro de eliminar el registro?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1"},on:{click:function(t){e.dialogDelete=!1}}},[e._v("No")]),a("v-btn",{attrs:{color:"green darken-1"},on:{click:e.confirmDelete}},[e._v("Sí")])],1)],1)],1),e.isLoading?a("md-card",[a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v("\n              Por favor, espere...\n              "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1):e._e(),a("v-dialog",{attrs:{"max-width":"500px",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{rules:e.campoRequerido,label:"Nombre del plan",required:""},model:{value:e.editedItem.cNomPlanPago,callback:function(t){e.$set(e.editedItem,"cNomPlanPago",t)},expression:"editedItem.cNomPlanPago"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{rules:e.campoRequerido,label:"Descripción del plan",required:""},model:{value:e.editedItem.cDescPlanPago,callback:function(t){e.$set(e.editedItem,"cDescPlanPago",t)},expression:"editedItem.cDescPlanPago"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{staticClass:"inputNumber",attrs:{rules:e.numericRules,type:"number",label:"Número máximo de usuarios",required:""},model:{value:e.editedItem.nNroMaxUsu,callback:function(t){e.$set(e.editedItem,"nNroMaxUsu",t)},expression:"editedItem.nNroMaxUsu"}})],1),a("v-flex",{attrs:{xs6:"",sm6:"",md6:""}},[a("v-text-field",{staticClass:"inputNumber",attrs:{label:"Tiempo intervalo de pago",type:"number",rules:e.numericRules,required:""},model:{value:e.editedItem.nNroFrecPago,callback:function(t){e.$set(e.editedItem,"nNroFrecPago",t)},expression:"editedItem.nNroFrecPago"}})],1),a("v-flex",{attrs:{xs6:"",sm6:"",md6:""}},[a("v-combobox",{attrs:{"item-text":"cNomCortoFrec","item-value":"nIdFrecuencia",items:e.frecuencias,label:"Frecuencia de pago","return-object":""},model:{value:e.frecuenciaPago,callback:function(t){e.frecuenciaPago=t},expression:"frecuenciaPago"}})],1),a("v-flex",{attrs:{xs6:"",sm6:"",md6:""}},[a("v-text-field",{staticClass:"inputNumber",attrs:{label:"Tiempo intervalo de alerta",type:"number",rules:e.numericRules,required:""},model:{value:e.editedItem.nNroFrecAlerta,callback:function(t){e.$set(e.editedItem,"nNroFrecAlerta",t)},expression:"editedItem.nNroFrecAlerta"}})],1),a("v-flex",{attrs:{xs6:"",sm6:"",md6:""}},[a("v-combobox",{attrs:{"item-text":"cNomCortoFrec","item-value":"nIdFrecuencia",items:e.frecuencias,label:"Frecuencia de alerta","return-object":""},model:{value:e.frecuenciaAlerta,callback:function(t){e.frecuenciaAlerta=t},expression:"frecuenciaAlerta"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{staticClass:"inputNumber",attrs:{rules:e.precioRules,type:"number",label:"Precio",required:""},model:{value:e.editedItem.nPrecio,callback:function(t){e.$set(e.editedItem,"nPrecio",t)},expression:"editedItem.nPrecio"}})],1)],1)],1)],1),e.errored?a("div",{staticClass:"v-messages theme--light error--text"},[a("div",{staticClass:"v-messages__wrapper"},[a("div",{staticClass:"v-messages__message"},[e._v(e._s(e.errorMessage))])])]):e._e()],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"background-color":"#3198ca !important",color:"white !important"},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"success",disabled:!e.valid},on:{click:e.save}},[e._v("Save")])],1)],1)],1),a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Planes de pago")]),a("v-divider",{staticClass:"mx-2",staticStyle:{"max-height":"0px !important"},attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"info"},on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[e._v("Nuevo plan de pago")])],1),a("div",{staticStyle:{position:"static !important"}},[a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"search",label:"Buscar por nombre","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e.planesPagos?a("v-data-table",{attrs:{headers:e.headers,items:e.planesPagos,search:e.search,filter:e.searchData,"custom-filter":e.filterData,"rows-per-page-items":e.rowsPerPageItems,"no-data-text":"''","rows-per-page-text":"Filas por página"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cNomPlanPago))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cDescPlanPago))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.nNroMaxUsu))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.nNroFrecPago))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cNomFrecPago))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.nNroFrecAlerta))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.cNomFrecAlerta))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.nPrecio))]),a("td",{staticClass:"justify-start layout"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.editItem(t.item)}}},[e._v("edit")]),a("v-icon",{attrs:{small:""},on:{click:function(a){return a.stopPropagation(),e.deleteItem(t.item)}}},[e._v("delete")])],1)]}},{key:"no-results",fn:function(){return[a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("No se encontraron resultados")])]},proxy:!0}],null,!1,4284588414)}):e._e()],1)],1)],1)])])},ua=[],ma={name:"TableSearch",data:function(){return{valid:!0,errored:!1,errorMessage:null,isLoading:!1,dialog:!1,dialogDelete:!1,search:"",rowsPerPageItems:[10,20,30,40],headers:[{text:"Nombre del plan",value:"cNomPlanPago"},{text:"Descripción del plan",value:"cDescPlanPago"},{text:"Num. max. usuarios",value:"nNroMaxUsu"},{text:"Num Intervalo Pago",value:"nNroFrecPago"},{text:"Frecuencia Pago",value:"cNomFrecPago"},{text:"Num Intervalo Alerta",value:"nNroFrecAlerta"},{text:"Frecuencia Alerta",value:"cNomFrecAlerta"},{text:"Precio",value:"nPrecio"},{text:"Acciones",value:"nIdPlanPago",sortable:!1}],planesPagos:[],frecuencias:[],frecuenciaAlerta:null,frecuenciaPago:null,editedIndex:-1,itemToDelete:null,editedItem:{nIdPlanPago:0,cNomPlanPago:"",cDescPlanPago:"",nNroMaxUsu:0,nPrecio:0,nIdFrecPago:-1,cNomFrecPago:"",nNroFrecPago:0,nIdFrecAlerta:0,cNomFrecAlerta:"",nNroFrecAlerta:0,nIdUsuCre:-1},defaultItem:{nIdPlanPago:0,cNomPlanPago:"",cDescPlanPago:"",nNroMaxUsu:0,nPrecio:0,nIdFrecPago:-1,cNomFrecPago:"",nNroFrecPago:0,nIdFrecAlerta:0,cNomFrecAlerta:"",nNroFrecAlerta:0,nIdUsuCre:-1},precioRules:[function(e){return!!e||"El campo es requerido"},function(e){return/\d+(\.\d{1,2})?/.test(e)||"Campo sólo puede contener números o decimales"}],numericRules:[function(e){return!!e||"El campo es requerido"},function(e){return/^\d*$/.test(e)||"Campo sólo puede contener números"}],campoRequerido:[function(e){return!!e||"El campo es requerido"}]}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo plan pago":"Editar plan pago"}},methods:{editItem:function(e){this.editedIndex=this.planesPagos.indexOf(e),this.editedItem=Object.assign({},e),this.frecuenciaPago={nIdFrecuencia:this.editedItem.nIdFrecPago,cNomCortoFrec:this.editedItem.cNomFrecPago},this.frecuenciaAlerta={nIdFrecuencia:this.editedItem.nIdFrecAlerta,cNomCortoFrec:this.editedItem.cNomFrecAlerta},this.dialog=!0},deleteItem:function(e){this.dialogDelete=!0,this.itemToDelete=e},confirmDelete:function(){var e=this,t=this.itemToDelete.nIdPlanPago,a=1;this.$http.delete("/api/planpago/".concat(t,"/").concat(a)).then(function(a){var s=e.planesPagos.findIndex(function(e){return e.nIdPlanPago==t});e.planesPagos.splice(s,1)}).catch(function(e){return console.log(e)}),this.dialogDelete=!1},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1,e.errored=!1,e.errorMessage=null,e.$refs.form.reset()},300)},save:function(){var e=this;this.$refs.form.validate()&&(this.dialog=!1,this.isLoading=!0,this.editedItem.nIdUsuCre=1,this.editedItem.nIdFrecPago=this.frecuenciaPago.nIdFrecuencia,this.editedItem.cNomFrecPago=this.frecuenciaPago.cNomCortoFrec,this.editedItem.nIdFrecAlerta=this.frecuenciaAlerta.nIdFrecuencia,this.editedItem.cNomFrecAlerta=this.frecuenciaAlerta.cNomCortoFrec,this.editedIndex>-1?(Object.assign(this.planesPagos[this.editedIndex],this.editedItem),this.$http.put("/api/planpago/".concat(this.editedItem.nIdPlanPago),this.editedItem).then(function(t){console.log(t),e.isLoading=!1,e.close()}).catch(function(t){console.log(t.response.data),e.isLoading=!1,e.dialog=!0,e.errored=!0,e.errorMessage=t.response.data})):(console.log(this.editedItem),this.$http.post("/api/planpago",this.editedItem).then(function(t){console.log(t.data),e.editedItem.nIdPlanPago=t.data.nIdPlanPago,e.planesPagos.push(e.editedItem),e.isLoading=!1,e.close()}).catch(function(t){console.log(t.response.data),e.isLoading=!1,e.dialog=!0,e.errored=!0,e.errorMessage=t.response.data})))},searchData:function(){var e=this;return this.planesPagos.some(function(t){return t.cNomPlanPago.toString().toLowerCase().indexOf(e.search.toLowerCase())>-1})},filterData:function(){var e=this;return this.planesPagos.filter(function(t){return t.cNomPlanPago.toString().toLowerCase().indexOf(e.search.toLowerCase())>-1})}},mounted:function(){var e=this;this.$http.get("/api/planPago").then(function(t){e.planesPagos=t.data}).catch(function(e){return console.log(e)}),this.$http.get("/api/frecuencia").then(function(t){e.frecuencias=t.data}).catch(function(e){return console.log(e)})}},pa=ma,va=Object(l["a"])(pa,da,ua,!1,null,null,null),fa=va.exports;s["default"].use(x["a"]);var ga=new x["a"]({mode:"history",linkExactActiveClass:"nav-item active",routes:[{path:"/",component:Q,children:[{path:"inicio",name:"Inicio",component:Je,meta:{requiresAuth:!0}},{path:"administracion/usuario",name:"Administración > Usuario",component:ct,meta:{requiresAuth:!0}},{path:"/administracion/empresas",name:"Administracion > Empresas",component:ft},{path:"/administracion/perfil",name:"Administracion > Perfiles",component:Ct},{path:"/administracion/usuarios",name:"Administracion > Usuarios",component:At},{path:"/administracion/unidadoperativa",name:"Administracion > Unidades Operativas / Sucursales",component:sa},{path:"/administracion/area",name:"Administracion > Areas / Cargos",component:ca},{path:"/administracion/planpago",name:"Administracion > Plan de pago",component:fa}]},{path:"/login",name:"login",component:jt,meta:{public:!0,onlyWhenLoggedOut:!0}},{path:"/cambioClave",name:"cambioClave",component:Bt,props:!0},{path:"/olvidoClave",name:"olvidoClave",component:Zt,meta:{public:!0,onlyWhenLoggedOut:!0}}]});ga.beforeEach(function(e,t,a){var s=e.matched.some(function(e){return e.meta.public}),i=e.matched.some(function(e){return e.meta.onlyWhenLoggedOut}),r=!!w.getToken();return s||r?r&&i?a("/"):void a():a({path:"/login",query:{redirect:e.fullPath}})});var ha=ga,ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeDropDown,expression:"closeDropDown"}],staticClass:"dropdown",class:{open:e.isOpen},on:{click:e.toggleDropDown}},[e._t("title",[a("a",{staticClass:"dropdown-toggle",attrs:{"data-toggle":"dropdown",href:"javascript:void(0)"}},[a("i",{class:e.icon}),a("p",{staticClass:"notification"},[e._v("\n        "+e._s(e.title)+"\n        "),a("b",{staticClass:"caret"})])])]),e._t("default")],2)},xa=[],Ia={name:"drop-down",props:{title:String,icon:String},data:function(){return{isOpen:!1}},methods:{toggleDropDown:function(){this.isOpen=!this.isOpen},closeDropDown:function(){this.isOpen=!1}}},Ca=Ia,_a=Object(l["a"])(Ca,ba,xa,!1,null,null,null),ya=_a.exports,Sa={install:function(e){e.component("drop-down",ya)}},Oa=Sa,wa=a("c7db"),ka={install:function(e){e.directive("click-outside",wa["directive"])}},Na=ka,Aa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"notifications"},[a("transition-group",{attrs:{name:"list"}},e._l(e.notifications,function(t){return a("notification",{key:t.timestamp.getTime(),attrs:{message:t.message,icon:t.icon,type:t.type,timestamp:t.timestamp,"vertical-align":t.verticalAlign,"horizontal-align":t.horizontalAlign},on:{"on-close":e.removeNotification}})}),1)],1)},Ea=[],Pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alert open alert-with-icon",class:[e.verticalAlign,e.horizontalAlign,e.alertType],style:e.customPosition,attrs:{"data-notify":"container",role:"alert","data-notify-position":"top-center"},on:{click:function(t){return e.close()}}},[a("button",{staticClass:"close",attrs:{type:"button","aria-hidden":"true","data-notify":"dismiss"},on:{click:e.close}},[e._v("\n    ×\n  ")]),a("i",{staticClass:"material-icons",attrs:{"data-notify":"icon"}},[e._v(e._s(e.icon))]),a("span",{attrs:{"data-notify":"message"},domProps:{innerHTML:e._s(e.message)}})])},Ua=[],Da={name:"notification",props:{message:String,icon:String,verticalAlign:{type:String,default:"top"},horizontalAlign:{type:String,default:"center"},type:{type:String,default:"info"},timeout:{type:Number,default:2500},timestamp:{type:Date,default:function(){return new Date}}},data:function(){return{elmHeight:0}},computed:{hasIcon:function(){return this.icon&&this.icon.length>0},alertType:function(){return"alert-".concat(this.type)},customPosition:function(){var e=this,t=20,a=this.elmHeight+10,s=this.$notifications.state.filter(function(t){return t.horizontalAlign===e.horizontalAlign&&t.verticalAlign===e.verticalAlign&&t.timestamp<=e.timestamp}).length,i=(s-1)*a+t,r={};return"top"===this.verticalAlign?r.top="".concat(i,"px"):r.bottom="".concat(i,"px"),r}},methods:{close:function(){this.$emit("on-close",this.timestamp)}},mounted:function(){this.elmHeight=this.$el.clientHeight,this.timeout&&setTimeout(this.close,this.timeout)}},$a=Da,za=(a("ca9f"),Object(l["a"])($a,Pa,Ua,!1,null,"92b06744",null)),Ra=za.exports,ja={components:{Notification:Ra},data:function(){return{notifications:this.$notifications.state}},methods:{removeNotification:function(e){this.$notifications.removeNotification(e)}}},Ma=ja,Ta=(a("6ae5"),Object(l["a"])(Ma,Aa,Ea,!1,null,null,null)),qa=Ta.exports,Fa={state:[],removeNotification:function(e){var t=this.state.findIndex(function(t){return t.timestamp===e});-1!==t&&this.state.splice(t,1)},addNotification:function(e){e.timestamp=new Date,e.timestamp.setMilliseconds(e.timestamp.getMilliseconds()+this.state.length),this.state.push(e)},notify:function(e){var t=this;Array.isArray(e)?e.forEach(function(e){t.addNotification(e)}):this.addNotification(e)}},La={install:function(e){e.mixin({data:function(){return{notificationStore:Fa}},methods:{notify:function(e){this.notificationStore.notify(e)}}}),Object.defineProperty(e.prototype,"$notify",{get:function(){return this.$root.notify}}),Object.defineProperty(e.prototype,"$notifications",{get:function(){return this.$root.notificationStore}}),e.component("Notifications",qa)}},Ha=La,Ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar",style:e.sidebarStyle,attrs:{"data-color":e.activeColor}},[a("div",{staticClass:"logo"},[a("a",{class:[e.showIcons?"ml-1":"ml-6","simple-text logo-md"],attrs:{href:"#"}},[a("div",{staticClass:"logo-new"},[a("img",{attrs:{src:e.imgLogo,alt:""}})])])]),a("div",{staticClass:"sidebar-wrapper"},[e._t("content"),e._t("default",[a("sidebar-link")])],2)])},Ja=[],Wa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("md-list",{staticClass:"nav",attrs:{"md-expand-single":"true"}},[a("md-list-item",{class:{"hidden-text-menu":e.showIcons},on:{click:function(t){e.expandAdmin=!1}}},[a("router-link",{staticClass:"menu-router-link",attrs:{to:"/inicio"}},[a("md-icon",[e._v("border_all")]),e._v("Inicio\n      ")],1)],1),a("md-list-item",{class:{"hidden-text-menu":e.showIcons},attrs:{"md-expand":"","md-expanded":e.expandAdmin},on:{"update:mdExpanded":function(t){e.expandAdmin=t},"update:md-expanded":function(t){e.expandAdmin=t},click:function(t){e.expandConfig=!1}}},[a("md-icon",[e._v("supervisor_account")]),a("p",{staticClass:"white-text"},[e._v("Administración")]),a("md-list",{key:e.permisosReload,attrs:{slot:"md-expand"},slot:"md-expand"},e._l(e.permisos,function(t,s){return a("md-list-item",{key:s,on:{click:function(a){return e.hideSidebar(t.nIdMenuPermiso)}}},[a("hr",{staticStyle:{background:"#62c35c",border:"none","margin-top":"-20px","margin-bottom":"-5px","margin-left":"10px"},attrs:{width:"4",size:"40"}}),a("router-link",{class:{"pl-2":!e.showIcons},attrs:{to:t.cRuta}},[a("md-icon",[e._v(e._s(t.cIcon))]),e._v("\n            "+e._s(t.cMenuNombre)+"\n          ")],1)],1)}),1)],1)],1)],1)},Ka=[],Ga={inject:{autoClose:{default:!0}},props:{showIcons:{type:Boolean,default:!1}},data:function(){return{expandSingle:!0,expandConfig:!1,expandAdmin:!1,permisos:[],permisosReload:0,activeIndex:-1}},mounted:function(){var e=localStorage.getItem("user"),t=JSON.parse(e);this.permisos=t.permisos,console.log(this.permisos),this.permisosReload++},methods:{hideSidebar:function(e){this.activeIndex=e,this.autoClose&&this.$sidebar&&!0===this.$sidebar.showSidebar&&this.$sidebar.displaySidebar(!1)}}},Ya=Ga,Xa=(a("26aa"),Object(l["a"])(Ya,Wa,Ka,!1,null,null,null)),Za=Xa.exports,Qa={components:{SidebarLink:Za},props:{title:{type:String,default:""},backgroundImage:{type:String,default:a("9524")},imgLogo:{type:String,default:a("88bc")},activeColor:{type:String,default:"green",validator:function(e){var t=["","purple","blue","green","orange","red"];return-1!==t.indexOf(e)}},sidebarLinks:{type:Array,default:function(){return[]}},autoClose:{type:Boolean,default:!0},showIcons:{type:Boolean}},data:function(){return{expandSingle:!0}},provide:function(){return{autoClose:this.autoClose}},computed:{sidebarStyle:function(){return{backgroundColor:"#474A4F"}}}},Va=Qa,es=(a("0efd"),Object(l["a"])(Va,Ba,Ja,!1,null,null,null)),ts=es.exports,as={showSidebar:!1,displaySidebar:function(e){this.showSidebar=e}},ss={install:function(e){e.mixin({data:function(){return{sidebarStore:as}}}),Object.defineProperty(e.prototype,"$sidebar",{get:function(){return this.$root.sidebarStore}}),e.component("side-bar",ts),e.component("sidebar-link",Za)}},is=ss,rs=a("43f9"),ns=a.n(rs),os=(a("51de"),a("9e17"),a("54ba"),{install:function(e){e.use(is),e.use(ns.a)}}),ls=a("ba48"),cs=a.n(ls),ds=a("9483");function us(e){return e<9?"0"+e:e}Object(ds["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),m.a.defaults.baseURL="https://jaamtech-api.azurewebsites.net",s["default"].prototype.$http=m.a,s["default"].filter("formatDate",function(e){if(e){var t=new Date(e);return us(t.getDate())+"/"+us(t.getMonth()+1)+"/"+t.getFullYear()}return e}),s["default"].prototype.$Chartist=cs.a,s["default"].use(v),s["default"].use(os),s["default"].use(Oa),s["default"].use(Na),s["default"].use(Ha),s["default"].use(b.a),s["default"].use(g.a,{theme:{primary:"#3f51b5",secondary:"#b0bec5",accent:"#8c9eff",error:"#b71c1c"}}),new s["default"]({el:"#app",render:function(e){return e(d)},router:ha,store:void 0,data:{Chartist:cs.a}})},"5fbe":function(e,t,a){},"5fc4":function(e,t,a){},"67d3":function(e,t,a){"use strict";var s=a("798e"),i=a.n(s);i.a},"686e":function(e,t,a){"use strict";var s=a("0f8a"),i=a.n(s);i.a},"6ae5":function(e,t,a){"use strict";var s=a("56c8"),i=a.n(s);i.a},"6f81":function(e,t,a){},"716f":function(e,t,a){},7292:function(e,t,a){"use strict";var s=a("3f12"),i=a.n(s);i.a},"798e":function(e,t,a){},"825d":function(e,t,a){"use strict";var s=a("d3c8"),i=a.n(s);i.a},"88bc":function(e,t,a){e.exports=a.p+"img/logo_login.5a038798.png"},9524:function(e,t,a){e.exports=a.p+"img/sidebar-2.32103624.jpg"},"9e17":function(e,t,a){},a180:function(e,t,a){e.exports=a.p+"img/marc.aba54d65.jpg"},a73e:function(e,t,a){},ae26:function(e,t,a){"use strict";var s=a("46ec"),i=a.n(s);i.a},c1a9:function(e,t,a){"use strict";var s=a("cbe5"),i=a.n(s);i.a},c896:function(e,t,a){"use strict";var s=a("5fbe"),i=a.n(s);i.a},ca9f:function(e,t,a){"use strict";var s=a("033e"),i=a.n(s);i.a},cbe5:function(e,t,a){},d3c8:function(e,t,a){}});
//# sourceMappingURL=app.3e177004.js.map